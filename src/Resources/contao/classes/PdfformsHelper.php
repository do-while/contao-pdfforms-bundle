<?php
 namespace Softleister\PdfformsBundle; use Contao\File; use Contao\Config; use Contao\System; use Contao\Backend; use Contao\Database; use Contao\Validator; use Contao\FilesModel; use Contao\StringUtil; use setasign\Fpdi\Tcpdf\Fpdi; use Contao\Image\ResizeConfiguration; use Contao\CoreBundle\ContaoCoreBundle; use Symfony\Component\VarDumper\VarDumper; define("\x4c\111\x5a\x45\x4e\132\x50", "\114\151\143\145\x6e\x63\145"); define("\120\122\x4f\x44\x55\x43\124", "\160\144\x66\146\157\162\155\163"); define("\126\x30\126\64\130\112\x45\x77\164\x76\62\x46\x43\x76\x58\x6c\x52\x4e", "\x31\x32\63\x34\65\x36\67\x38\71\60\x31\62\63\64\65\66\67\70\x39"); define("\126\x45\x52\123\x49\x4f\x4e", ContaoCoreBundle::getVersion()); define("\x49\115\107\x44\125\115\115\x59", "\x64\141\x74\x61\72\151\155\x61\x67\x65\57\160\x6e\x67\73\x62\x61\163\145\x36\64\54\x69\126\102\x4f\x52\167\60\x4b\107\147\157\101\x41\101\x41\x4e\123\x55\150\105\x55\x67\x41\x41\x41\x4a\x59\x41\x41\x41\x41\x31\103\101\111\x41\x41\101\x41\x73\66\64\130\x31\x41\101\101\x41\107\x58\x52\106\127\x48\x52\x54\142\x32\132\x30\144\62\x46\x79\132\121\x42\x42\x5a\x47\x39\151\132\x53\102\x4a\142\127\x46\156\132\126\112\x6c\131\127\x52\65\x63\143\x6c\154\120\x41\101\101\103\x30\170\x4a\x52\105\106\x55\x65\116\x72\163\x58\x47\x6c\130\x32\172\157\121\152\x52\x7a\152\67\101\164\162\157\146\x54\x2f\57\66\x64\x2b\67\x6d\166\x54\121\157\x44\x73\x69\x51\117\x32\x33\170\x31\116\64\x69\146\x4a\x53\x2b\x54\105\167\117\x73\65\61\x71\x45\143\103\111\157\x6b\x7a\x35\63\x6c\172\x6d\150\x53\71\x2f\166\x33\x37\67\126\161\57\115\x33\104\x71\x55\x52\x51\121\x56\x69\116\x43\163\112\x71\126\x42\x42\127\x45\x46\141\x6a\x67\162\x41\141\x46\x59\x54\x56\x71\x43\x43\x73\x49\113\x78\x47\x42\x57\105\61\113\x67\x69\x72\125\x55\106\x59\121\126\x69\116\x43\163\112\x71\126\102\x42\127\x34\x39\152\150\x71\x72\70\x49\111\x66\102\120\x2b\x33\164\105\167\63\150\120\x79\x72\124\x63\53\x51\130\x65\x62\162\146\x43\x77\x64\x56\x6f\x68\123\113\x4c\65\113\x32\x4f\170\x65\126\123\x4b\127\x76\113\x72\x59\130\x38\x77\x58\x37\x48\x41\64\x39\166\117\122\121\x70\x61\x52\102\165\x74\x39\163\167\x44\117\120\x6c\x4d\141\130\165\x4f\117\x37\132\x6d\x66\106\62\63\57\x64\x54\x6a\x78\x76\112\x38\x33\x6d\x59\x6e\63\x76\105\111\x41\x68\145\130\x31\71\x46\170\x73\110\x71\x72\x6b\x73\67\127\147\x4e\x41\132\167\64\103\x6f\x65\171\x49\122\124\172\120\105\x38\66\160\x44\x73\x5a\x78\x48\x4b\172\x73\x62\x37\145\x62\x7a\x65\x62\x74\x39\x58\127\71\127\165\x47\67\x65\x74\132\107\161\x34\127\116\166\x47\141\172\60\127\151\x63\x65\122\67\116\104\x38\x50\x38\116\x54\105\102\151\x35\x43\147\x54\x6f\x50\120\x71\144\x66\x50\71\162\151\x34\161\x6e\x59\x38\x2f\166\66\x39\127\x69\x35\152\143\x57\x42\161\164\x39\145\67\x76\142\x38\x33\104\x76\x48\x72\x78\x34\x2f\147\67\x53\x31\61\141\x61\170\67\x39\x2b\61\x62\163\71\x6b\x4d\115\172\104\101\x34\x70\x50\x6e\x35\x2b\146\x78\127\x4b\124\102\110\x49\x58\x68\53\x64\130\x56\71\x65\x30\164\132\x47\143\152\x59\x69\x6a\124\66\115\145\120\61\53\61\x57\126\122\157\163\x38\x75\x58\x75\162\x6e\71\x2b\x48\150\61\x72\151\x45\112\x61\61\x57\x77\66\130\123\60\127\x69\57\154\143\115\x79\x42\154\121\x46\x62\x34\x49\x6d\x30\124\157\164\x76\166\144\67\x70\144\151\107\164\156\x72\x78\153\110\150\x68\66\x4d\146\x76\x34\60\x64\x4b\x37\157\101\x41\123\115\103\x78\x62\105\130\161\131\x6a\x78\141\x73\x71\150\x4b\153\67\x30\124\163\172\144\102\x79\162\x77\x79\x79\141\x37\130\131\x74\101\167\117\163\151\x63\144\x57\x64\x30\x6e\141\x73\x66\63\x44\x51\x43\111\x77\x61\x4b\151\153\147\143\x42\x38\x50\165\70\x4e\150\x30\x63\142\x33\71\x62\x33\156\170\x34\x66\x63\x55\x34\70\152\160\x4e\x74\x7a\142\x75\152\171\x75\57\x7a\66\130\x51\x35\156\x2b\x4d\x74\x46\x31\x64\x58\70\103\115\x35\x32\153\115\x4c\132\147\x69\x32\x57\120\150\64\112\172\x6f\104\x4a\x2b\x6c\x76\116\162\126\163\105\x34\124\105\131\143\x48\151\x39\107\101\147\71\x34\x4c\125\x55\160\131\x53\101\x6d\143\x41\165\153\x66\x73\x41\166\x6e\x43\x37\x45\x62\57\57\115\x50\x47\x35\x31\150\x37\131\x77\x5a\x6d\x39\166\114\171\x2b\53\144\x50\103\150\x50\117\x78\57\110\x45\153\x6e\143\123\x55\x6e\172\60\x44\x42\156\151\x38\x39\x66\x72\66\106\104\101\163\x4e\x33\x49\71\x7a\x63\x5a\x4f\x47\x47\x4c\x52\123\161\66\102\57\x47\142\172\122\x35\x47\111\x37\114\163\x42\101\x59\x77\114\102\147\154\71\x43\x62\153\x72\x2b\122\x54\x77\x49\146\x56\x36\x35\166\x31\x47\x69\165\x38\132\125\x76\x67\146\x52\x6c\160\x43\x52\161\102\x2b\x43\123\x44\x50\x34\x4a\x69\x43\160\126\61\110\x44\x77\x68\x4d\x61\142\124\x6c\x56\x51\x49\151\x44\165\x54\x46\167\151\102\x6a\x65\x44\123\x55\x34\x2b\122\57\147\64\105\161\165\130\171\x38\143\70\146\x4f\x70\x35\117\152\x6d\161\123\132\114\125\x37\156\x57\141\162\x56\x57\143\156\x47\125\126\x51\x49\120\x69\x41\x56\x30\x6c\x77\x4e\114\x63\155\x41\x78\x37\151\57\x64\130\116\124\x53\107\x4b\125\157\103\155\66\x6b\x2f\x6b\x6c\x71\x34\125\106\101\x35\71\x48\x30\53\x62\164\102\x75\x34\x55\111\x6a\61\x52\104\x37\107\123\x7a\x46\x46\172\112\153\101\x6a\147\115\171\115\x72\171\x38\152\103\171\x59\105\146\104\x44\x32\x63\141\x50\152\53\x54\153\x46\x66\125\x69\150\x6c\x79\x76\71\64\146\x44\x2f\155\x41\x41\x38\101\x53\110\143\x43\156\102\142\x68\x67\x4f\x7a\70\71\x68\66\171\x39\120\x54\64\x46\x4f\124\x34\x41\x69\x51\x69\115\x49\x44\x6d\152\144\x51\121\x57\x43\x75\107\x36\57\146\157\x56\53\150\x45\x57\x63\153\60\170\x32\102\x43\x39\x65\120\x6f\x52\103\127\153\102\166\x4d\x45\x6a\x2b\x43\127\x4a\71\113\x79\x4d\121\131\157\130\154\x59\x76\x47\x6d\x5a\171\131\107\x2b\x63\113\x76\155\101\115\x35\101\x67\115\142\121\x35\x78\x4e\x4a\x6a\x69\x32\157\x2b\115\x48\x59\x67\x4a\66\x44\113\157\x5a\x38\121\x68\x44\144\123\x47\x41\x4f\162\x79\64\121\104\x6f\x42\x7a\x32\153\x41\x41\x45\x2b\x37\x6d\105\65\142\67\142\141\x4e\x41\156\105\x65\x46\x52\x61\x4d\x4c\57\106\104\x4f\x61\126\147\x64\x71\x62\153\152\x67\x78\x68\114\141\60\147\147\101\x51\114\113\115\141\103\x68\156\x44\172\171\x56\x76\x57\144\150\x44\121\145\162\107\147\x5a\61\131\167\70\62\122\155\x70\160\157\x43\53\x56\113\x6b\x73\110\x59\62\152\x52\124\x43\60\x54\x55\101\170\x32\x50\70\x73\x46\x48\x71\x49\x54\x6b\66\131\x67\113\101\63\x45\x32\x49\71\x67\x4e\x73\145\142\x32\62\x6a\x49\152\x52\125\141\x4e\x4d\x4f\x6b\x50\160\x49\x4b\x57\x34\x58\x72\x77\165\124\x41\x31\157\107\141\146\x48\x30\64\x4c\114\x71\x4b\x38\x30\155\153\x32\156\145\x46\x41\x6b\111\151\x50\124\142\x54\130\x35\x41\x59\x2b\x41\172\63\x54\x31\x79\115\145\107\x61\114\115\x6d\x77\151\161\154\x37\x66\161\102\64\125\147\x59\x76\167\117\145\115\x49\162\147\141\x5a\110\144\70\172\106\167\150\156\x61\63\x69\x30\102\64\x2f\145\125\114\65\62\x31\x2f\102\65\x30\x35\x6b\x39\125\x51\x53\151\146\x32\x55\153\x43\x67\x67\x68\x74\112\102\x6b\111\x56\126\x38\124\114\165\126\162\166\x73\x49\x79\x31\125\x51\x54\145\101\123\x32\x4a\x34\123\x63\144\x63\x6c\63\x34\124\113\147\111\156\x55\110\132\x46\114\105\113\112\154\x49\63\105\x73\x65\105\103\161\x72\x35\x65\x2b\170\x43\105\146\53\163\x41\112\x41\117\x66\110\102\x78\147\x51\x65\x45\125\165\113\150\126\x4e\x33\x36\141\x35\113\x4b\x6e\122\x55\x71\156\102\x35\x4f\x7a\114\x42\103\103\x48\62\162\155\101\x35\53\x61\103\121\x6f\x6a\66\125\x58\156\x63\x39\155\161\x76\x6e\x69\122\x64\103\x42\165\x75\x4e\60\x65\172\x31\152\125\64\151\x56\x63\163\146\x63\71\102\x79\53\57\126\130\130\x4c\146\x49\x51\162\144\x61\132\x34\154\143\x4f\x44\165\x42\x39\146\x6e\x6e\x4a\x57\160\166\x30\144\130\x39\x44\x55\x69\x46\114\x61\57\57\x46\x45\x68\x6c\144\104\x45\x34\x50\61\170\x64\x7a\x55\142\x77\111\x68\x58\x58\162\71\123\x4f\x6f\x44\x5a\124\104\x6b\104\x6a\x63\x56\x36\x66\146\x68\70\146\172\155\153\62\x76\60\x66\102\x56\x48\x79\64\164\x72\x4a\x39\x62\x71\x61\107\104\x4a\x63\124\x64\113\x71\x68\145\64\x51\156\x4a\114\x74\124\122\171\x66\125\124\161\x62\x47\x7a\x5a\101\151\x78\x33\x6c\x6d\x6a\x34\x62\150\165\130\x48\x6b\x42\172\167\x61\126\x69\x41\116\153\x4a\x4a\x4e\x36\115\170\x41\145\102\x53\x48\x69\x6c\x76\105\70\x4c\123\x41\156\116\x78\x4c\x53\105\104\125\110\x49\101\123\117\x67\x56\x65\x79\x57\104\164\x62\131\x62\x4b\x55\x32\103\x7a\x75\111\x59\x34\x6d\147\x31\124\x4a\103\64\x4c\121\62\155\x72\x5a\x35\65\125\116\x49\x53\x79\147\x30\125\104\70\x59\x41\65\107\x6b\x55\x39\103\127\117\166\x33\144\x78\x4f\103\x51\112\x55\x73\x52\101\x59\132\x46\x65\125\x79\121\165\113\170\x31\x6c\127\x68\x4a\155\x76\170\x38\121\x53\64\115\x69\x4c\157\142\x32\x2b\61\63\x53\60\x51\156\x51\x53\153\x42\x71\57\110\x69\x5a\x53\x78\x4b\x46\60\x64\x36\102\103\123\x56\142\151\165\132\x59\156\123\x68\x76\146\x6e\x4c\57\x55\70\x48\164\115\102\x72\113\x6e\101\170\144\125\126\66\106\x4c\66\x5a\x64\x4d\160\x56\x67\x6a\113\101\116\x56\x51\x32\143\x52\x6d\x74\121\x72\x32\116\145\x67\126\x47\x50\142\53\143\x6f\120\x35\x4f\x71\125\x54\x52\x52\x58\x57\143\124\x67\144\x56\111\x6b\x4d\101\x47\x76\107\x76\103\x6d\x4b\157\105\x6e\167\147\122\x51\163\x6c\x61\x43\114\x48\110\x38\x37\110\113\161\x61\161\x7a\162\101\x49\112\107\66\65\122\x65\x50\x6f\x4b\x2b\102\x6e\143\126\153\126\146\116\124\66\161\x76\62\x51\x6b\x67\x34\104\x4c\143\163\142\61\103\124\x68\150\126\124\117\66\x35\150\121\x74\171\x65\x39\x4a\x59\x77\121\126\130\124\x34\x51\157\x4b\x58\x51\160\x6d\126\127\x53\x77\112\152\171\x6b\x75\67\x63\131\x70\x76\127\x74\x54\x6b\146\116\112\143\150\x32\153\131\123\x73\x56\x71\153\121\x31\157\160\156\160\x55\71\120\x54\71\117\130\x6c\x34\120\x59\x51\x44\x4f\x51\x56\x38\102\x69\101\157\x76\x73\x2f\166\x4d\132\113\141\167\x71\x6c\102\x42\161\105\x67\x63\x46\154\130\64\126\153\x6f\x55\x44\x6a\x41\60\x66\x57\163\167\x51\106\x72\x32\x64\150\x34\153\x62\x42\122\x51\107\x54\x45\x32\57\x59\106\x4e\164\66\x55\x75\61\65\x4e\x64\170\x46\x6f\x76\x46\150\x31\110\105\104\170\67\154\63\x56\122\111\125\161\x6f\x53\x38\144\152\x34\x44\x4e\x59\x4f\116\x77\126\63\65\x2b\x78\x6a\154\x54\x30\116\x51\63\x71\147\x55\x68\113\53\x59\x55\x37\x57\111\130\107\107\x4a\112\x2b\x45\x46\x53\x62\172\x48\104\x37\x4d\150\x31\x30\160\65\x41\x53\111\x51\165\116\144\x48\107\x6c\163\x4b\145\x43\132\141\153\x32\x4c\160\142\141\x56\160\144\x48\x2f\x66\112\63\x6a\143\x43\x32\x44\x62\65\x68\x74\x69\x76\x52\x73\60\x33\x43\x50\122\x74\x69\x67\62\64\116\x32\x32\x37\x6a\x69\170\62\x52\153\x45\x58\x44\160\x52\x71\x55\x47\126\x42\x59\155\141\63\152\117\63\x52\x6d\x4d\101\111\x6b\x46\120\x38\160\x6b\157\x5a\x52\x66\x37\x2b\70\67\x68\x63\x72\143\117\151\x39\x7a\123\60\x56\121\x63\x43\113\x34\x37\167\153\151\x76\153\67\x44\71\71\130\162\142\x33\150\144\x67\x72\x44\147\x34\x71\101\153\170\x6f\x55\101\x58\x79\x41\57\x6a\105\141\127\x56\112\x43\141\x58\67\x5a\142\153\60\x62\x4a\66\x71\x43\x54\141\x50\x72\103\171\x5a\116\116\x51\62\x70\x70\61\x44\101\x46\x63\131\147\105\110\x5a\124\x64\x30\x54\61\122\112\x55\x4f\157\154\160\144\x69\63\x51\x65\x45\x36\x75\x6e\147\x52\145\x73\106\165\121\x7a\127\155\x65\x76\x70\131\x4a\x77\x6a\x70\x71\x49\154\x5a\112\x68\x4d\x73\x71\110\154\x63\153\x6b\154\141\143\126\x71\165\x63\101\162\71\x47\x4a\x6d\x4a\x50\116\x39\115\x74\x6d\x30\153\167\x7a\120\x7a\67\x76\71\166\x6a\104\151\x74\x4f\70\57\120\x7a\x34\107\160\x7a\x58\106\x66\x44\x36\105\124\x50\x45\150\x45\124\130\x79\121\143\x72\x47\154\x51\x4b\x78\x6e\x6f\x4a\105\x42\147\x61\125\145\165\x64\121\151\111\x36\x44\x63\115\107\x55\x65\x37\x32\x65\x6f\61\70\x2f\x73\144\x6f\132\161\x6f\104\163\x38\172\167\x6e\x73\71\x5a\x78\x63\160\x7a\120\142\x4d\144\x31\x79\162\113\x2f\156\x55\x61\x34\x4c\157\x78\115\x52\131\x69\x61\132\x52\x54\144\106\x46\x49\x45\x68\145\x73\x58\x38\155\162\160\x52\101\130\x66\130\x54\57\160\170\124\154\x57\117\x30\x38\166\x68\61\x4c\x38\63\x74\x42\x49\170\x59\x59\x64\x71\x54\x45\x2b\153\145\x36\127\102\x4b\107\123\163\x2b\x66\110\117\x53\x47\65\x54\x43\x48\70\157\101\x52\x6d\x52\x57\x59\166\170\171\152\x33\x4b\x30\x6b\x51\157\105\x79\162\122\x48\141\102\167\x33\146\x32\126\123\x52\61\65\165\172\154\x78\x52\66\x59\124\x36\123\x31\112\144\x2f\141\125\57\x30\141\157\121\x35\x70\x59\x70\162\122\125\x46\x31\116\154\153\141\152\120\121\x75\154\x49\112\x54\142\x68\60\x47\132\151\143\x77\110\x44\111\117\147\164\115\124\x43\x66\x56\x45\53\161\x72\150\170\x61\157\x6d\131\172\121\x59\130\x46\60\154\x6d\151\x77\x69\x67\144\x6d\63\x78\122\x52\126\145\x42\67\153\x39\x6d\112\x76\172\x2f\x63\154\156\x47\127\114\x35\x45\112\64\x42\x51\x74\143\116\164\71\166\125\103\x51\61\132\107\x6f\x32\x73\x65\71\145\x35\x77\x6d\x6c\x75\64\130\155\63\71\x2f\x66\125\143\112\170\x4c\x78\114\x48\x52\x6e\61\x2b\57\160\160\x4f\112\x71\x69\x4a\111\124\x69\147\151\x44\x6f\x64\161\x49\170\x33\167\x41\x30\x4e\65\x65\130\x6f\x79\116\150\157\57\x50\107\x43\x56\146\162\x2b\x66\x68\x53\112\x44\x6a\157\x54\x31\141\x54\x77\53\x33\144\130\x2f\x62\171\x44\60\120\x4c\144\145\x33\66\132\62\165\x38\157\x4b\x54\156\x71\x35\117\x61\x74\x4d\112\x53\127\x75\x47\131\60\x30\x5a\121\x6a\71\114\141\x32\152\63\x44\x67\x4d\147\x4a\153\156\x57\x43\x74\145\x55\x52\x75\x46\x4f\x56\x55\x64\104\111\146\x67\161\67\x35\151\x37\161\x78\101\x6a\66\120\122\x71\53\57\104\106\154\x50\x76\x6a\122\x45\171\x4a\65\x4d\x4a\111\x4d\x54\x4d\172\171\x49\61\x37\71\x44\x2b\112\114\x31\x63\x61\x76\122\171\x75\x61\x35\x57\x4a\x42\x44\103\x6d\x34\x57\66\116\163\x44\63\x77\x72\x2f\x56\71\x70\61\153\53\122\102\x36\x38\164\x4d\x4f\166\x74\64\x46\x73\x70\125\116\161\115\x31\62\x4f\172\132\105\107\x42\x41\70\170\x2b\x58\x56\106\142\x4a\115\152\130\172\x42\121\x34\x62\x68\x38\63\147\x38\156\60\64\67\x76\122\67\60\152\x37\x75\105\x38\103\111\126\53\x35\132\x4c\67\161\x6c\115\x4a\x61\127\127\164\67\x35\x34\x49\x36\x57\62\102\143\60\130\x66\x76\x76\x6d\67\161\x34\63\x47\x4f\x43\x48\143\151\x42\x55\x6b\x37\x42\x49\146\154\x37\105\x6d\125\66\x6a\170\x44\117\x42\x2b\x46\x46\112\62\x74\x34\105\x67\x38\x42\157\x69\127\104\123\155\171\171\171\x35\101\147\x49\150\161\151\127\x31\x75\112\103\x44\67\x57\130\x36\122\114\x76\144\114\165\130\x4e\172\x64\152\x76\x5a\x57\125\146\x30\102\x4f\117\x58\154\x2b\152\x6b\x73\107\130\x4c\155\x6f\67\x5a\163\102\125\67\121\x6e\104\101\106\62\x77\x36\x49\x4a\163\130\142\125\x64\x54\x47\x63\125\x35\155\x58\x54\x63\x61\156\162\146\x67\x75\105\115\x4b\x72\66\x53\x65\x4c\132\x4a\115\x5a\101\x4c\101\x38\x4d\x66\x66\x47\107\60\61\x67\146\104\126\150\62\x56\146\x49\x68\x36\117\x71\164\53\x73\x61\164\x72\126\x61\114\162\156\x2b\x6f\x71\x36\104\147\x2f\125\110\x41\x37\161\114\145\x48\147\x77\x47\67\x71\106\130\x55\x6c\x33\166\x78\171\125\x37\120\x4c\x36\165\156\105\x6f\127\x70\71\x55\x7a\123\155\x2f\x7a\x4b\x30\x62\x69\160\145\64\151\x49\x42\x45\164\111\170\121\165\163\x66\70\170\x69\x51\x75\x71\150\153\166\144\150\115\112\121\x4c\x35\115\x71\x65\x6f\116\x67\x39\120\124\120\162\x37\60\123\103\111\103\x69\146\146\x36\146\130\101\x6c\x57\x47\123\x4e\70\x78\131\67\x58\x61\x45\x6b\102\60\x65\x56\x56\145\x4c\162\62\x31\165\163\x41\106\x66\x30\x4d\x52\x7a\126\x4e\x52\65\101\61\126\x62\x4f\x76\x56\x49\x64\x73\x53\160\132\112\x30\x46\x50\x68\x48\171\x53\x70\x66\x34\65\x4e\x2b\x70\x33\124\x57\x53\105\153\x64\170\x52\166\131\145\113\71\161\x45\x46\60\x5a\x54\x72\x5a\x2f\106\x65\x31\107\x50\x52\x62\150\145\x71\104\110\x43\161\x43\163\117\144\124\x61\146\170\x4f\153\x4b\66\x42\116\x43\x51\144\162\x65\142\151\151\111\x4f\x66\x2f\146\x74\x47\71\66\x79\155\x45\65\x39\63\x34\x39\x62\x76\111\x33\x4a\x55\146\172\x52\125\x54\x42\164\x47\130\x54\x35\111\x32\162\x4d\x31\x31\111\57\117\163\112\x49\156\x31\x36\x48\x55\x34\x55\155\x31\x50\70\126\x47\111\x70\160\146\x48\x41\121\x51\x64\67\157\111\x73\105\x37\x31\66\x75\x56\x64\152\x35\132\x47\152\130\x73\x43\131\65\x6f\x71\x39\x7a\x67\x4d\167\x33\150\x37\x67\143\152\142\x36\x4e\171\x69\x56\66\53\x67\x67\121\x35\x2f\106\x42\114\x73\125\x4a\142\x49\163\156\x2b\53\x61\x2b\x46\57\110\x77\147\62\x7a\x37\x55\124\67\53\171\x49\167\113\x30\x4f\141\112\105\x67\x4b\146\x47\123\x64\154\66\101\66\x76\106\111\x73\141\x46\115\x32\103\x6a\60\x49\x42\x2f\152\x51\132\104\171\x50\121\156\65\x79\x54\125\x59\132\166\x57\112\63\x30\105\70\167\143\x64\62\61\60\x71\161\102\x43\123\71\x31\x65\132\156\166\x77\x35\145\x53\131\142\71\151\x58\x6b\114\x63\x37\x42\160\x5a\x4c\x54\157\162\x33\x76\x53\x6d\105\113\62\144\x70\71\105\x4d\x56\144\x77\116\131\x50\145\124\102\121\170\122\x39\x64\x59\111\71\161\172\116\57\x64\63\x63\x6c\166\x6c\166\167\172\x36\171\122\x48\x78\x4d\112\x59\125\x4f\x34\x52\x31\115\150\155\127\x69\x51\x39\x34\x43\x6e\124\123\155\172\106\x50\x48\161\160\x2b\x49\x32\163\141\163\156\x49\x58\142\x52\154\71\104\x33\66\123\57\x38\126\131\x41\x43\61\x32\113\103\63\x30\x48\x52\x41\x59\x77\101\101\101\101\x42\112\x52\x55\x35\105\x72\153\x4a\147\147\147\x3d\75"); class PdfformsHelper extends Backend { protected static $arrProtectflags = array("\155\x6f\144\151\x66\x79", "\x65\170\164\162\x61\143\x74", "\160\x72\x69\156\164", "\x70\162\x69\x6e\x74\x2d\x68\151\x67\x68", "\x63\157\x70\x79", "\x61\x6e\x6e\x6f\164\x2d\146\157\x72\155\163", "\146\x69\x6c\154\55\146\x6f\x72\155\163"); public static function pdfforms($mode, $arrPDF, $datei = '') { $rootDir = System::getContainer()->getParameter("\153\145\162\156\145\154\56\160\x72\157\x6a\145\143\164\x5f\x64\151\162"); $hascontent = false; if ($mode === "\x53") { $_SESSION["\x70\144\x66\137\x66\x6f\x72\x6d\163"]["\x70\x64\146\x64\x6f\x63\165\x6d\145\x6e\x74"] = ''; } $l = array(); $l["\x61\137\155\145\164\x61\x5f\144\x69\162"] = "\x6c\164\162"; $l["\x61\137\x6d\x65\x74\141\x5f\143\x68\141\162\x73\x65\x74"] = System::getContainer()->getParameter("\153\145\x72\156\x65\x6c\x2e\x63\x68\x61\x72\163\145\164"); $l["\x61\x5f\155\x65\164\x61\x5f\154\x61\156\x67\x75\141\x67\x65"] = $GLOBALS["\124\114\137\x4c\x41\x4e\107\x55\101\107\105"]; $l["\x77\x5f\x70\x61\x67\145"] = "\x70\x61\147\145"; $font = PDF_FONT_NAME_MAIN; $pdf = new Fpdi(PDF_PAGE_ORIENTATION, "\x6d\155", PDF_PAGE_FORMAT, true, "\x55\x54\106\x2d\70", false, false); $pages = 0; if (!empty($arrPDF["\166\157\x72\154\141\x67\x65"]) && file($rootDir . "\57" . $arrPDF["\x76\x6f\162\x6c\141\x67\x65"])) { $pages = $pdf->setSourceFile($rootDir . "\57" . $arrPDF["\x76\157\162\x6c\141\147\x65"]); } $pdf->SetCreator(PDF_CREATOR . (self::E9EBD6F7C44D361732DA31836C7D15BD() ? "\54" : "\54\x20\104\105\x4d\117") . "\x20\143\x6f\x6e\x74\141\x6f\x2d\x70\144\x66\x66\157\162\x6d\x73\x2d\142\165\x6e\144\154\145"); $pdf->SetAuthor($arrPDF["\141\165\x74\x68\x6f\x72"]); $pdf->SetTitle($arrPDF["\x74\x69\164\154\145"]); $pdf->SetSubject($arrPDF["\146\157\162\155\x74\x69\164\x6c\x65"]); $pdf->setPrintHeader(false); $pdf->setPrintFooter(false); $pdf->SetMargins(0, 0, 0); $pdf->SetAutoPageBreak(true, 0); $pdf->setImageScale(PDF_IMAGE_SCALE_RATIO); $pdf->setLanguageArray($l); $pdf->getAliasNbPages(); $customfont = array("\122" => false, "\x42" => false, "\x49" => false, "\111\x42" => false); foreach ($customfont as $attr => $status) { if (!empty($arrPDF[$attr]) && file_exists($rootDir . "\x2f" . $arrPDF[$attr])) { $customfont[$attr] = \TCPDF_FONTS::addTTFfont($rootDir . "\57" . $arrPDF[$attr], '', '', 32, $rootDir . "\57" . dirname($arrPDF[$attr]) . "\57"); $file_parts = pathinfo($rootDir . "\x2f" . $arrPDF[$attr]); $pdf->AddFont("\143\165\x73\164\157\155\146\x6f\x6e\164", $attr == "\x52" ? '' : $attr, $file_parts["\x64\x69\162\156\141\155\145"] . "\57" . strtolower($customfont[$attr] . "\x2e\x70\x68\160")); } } $seiten = -1; $where = ''; if ($mode === "\x53") { if (!empty($arrPDF["\155\x75\154\164\151\x66\157\162\155"]) && is_array($arrPDF["\x6d\x75\154\x74\x69\146\157\x72\155"]) && $arrPDF["\x6d\165\154\x74\151\146\x6f\x72\x6d"][0]["\142\x65\144\x69\156\x67\165\x6e\147"] !== '') { $seiten = array(); foreach ($arrPDF["\155\165\154\164\151\146\x6f\162\x6d"] as $multi) { $multi["\151\x6e\x76\x65\162\164"] = "\165\x73\145\144"; if (!self::checkBedingung($multi, $arrPDF)) { continue; } $arrBereiche = StringUtil::trimsplit("\54", $multi["\163\145\151\x74\x65\x6e"]); foreach ($arrBereiche as $ber) { if (strpos($ber, "\x2d") === false) { $seiten[] = $ber; } else { $se = StringUtil::trimsplit("\x2d", $ber); for ($i = $se[0]; $i <= $se[1]; $i++) { $seiten[] = $i; } } } } if (count($seiten) < 1) { @unlink($rootDir . "\57" . $datei); return false; } $seiten = array_unique($seiten, SORT_NUMERIC); $where = "\40\101\x4e\x44\40\160\x61\147\145\40\111\116\50" . implode("\54", $seiten) . "\x29"; } } $objItems = Database::getInstance()->prepare("\123\105\114\x45\x43\x54\x20\52\x20\x46\122\117\115\40\164\154\x5f\160\x64\x66\146\x5f\x70\x6f\163\x69\164\x69\x6f\x6e\x73\40\127\x48\105\122\x45\x20\x70\x75\142\x6c\x69\163\150\145\144\x3d\x31\40\x41\x4e\x44\x20\x70\x69\x64\x3d\77" . $where . "\40\117\x52\104\x45\x52\40\102\131\40\160\141\x67\145\54\x20\163\x6f\x72\x74\151\156\x67")->execute($arrPDF["\x66\x6f\x72\155\151\x64"]); if ($objItems->numRows < 1 && $mode === "\123") { @unlink($rootDir . "\57" . $datei); return false; } if ($objItems->numRows > 0) { $page = 0; $lastpos = array(0, 0); while ($objItems->next()) { $arrItem = array(); $arrItem["\151\144"] = $objItems->id; $arrItem["\x74\171\x70\145"] = $objItems->type; $arrItem["\160\x69\x63\164\171\160\x65"] = $objItems->pictype; if ($objItems->pictype === "\165\x75\151\x64") { $picuuid = html_entity_decode($objItems->pictag); if (!Validator::isUuid($picuuid)) { $picuuid = System::getContainer()->get("\143\x6f\x6e\x74\x61\157\56\151\x6e\163\x65\162\x74\137\x74\x61\147\56\160\x61\x72\x73\145\x72")->replaceInline($picuuid); } if (array_key_exists($picuuid, $arrPDF["\141\x72\162\x46\151\145\x6c\x64\x73"])) { $picuuid = $arrPDF["\141\x72\162\x46\151\x65\x6c\x64\x73"][$picuuid]["\166\x61\154\165\x65"]; } $picuuid = str_replace("\55", '', $picuuid); if (mb_substr($picuuid, 0, 2) === "\x30\170") { $picuuid = mb_substr($picuuid, 2); } if (ctype_xdigit($picuuid) && mb_strlen($picuuid) == 32) { $picuuid = hex2bin($picuuid); } $objPic = FilesModel::findByUuid($picuuid); if ($objPic == null) { continue; } $arrItem["\160\151\143\x74\x79\160\145"] = "\x66\151\154\145"; $arrItem["\160\151\x63\x74\x61\x67"] = $objPic->path ?? ''; } else { $objPic = FilesModel::findByUuid($objItems->picture); $arrItem["\x70\151\x63\x74\x61\147"] = $objItems->pictag; } $arrItem["\x70\151\143\x74\x75\x72\145"] = $objPic->path ?? ''; $arrItem["\142\x61\162\x74\x79\160\145"] = $objItems->bartype; $arrItem["\x74\x65\x78\x74\151\164\x65\x6d\x73"] = StringUtil::deserialize($objItems->textitems, true); $arrItem["\160\141\147\x65"] = $objItems->page; $arrItem["\160\157\163\170\171"] = StringUtil::deserialize($objItems->posxy, true); $arrItem["\160\x69\x63\163\x69\x7a\145"] = StringUtil::deserialize($objItems->picsize, true); $arrItem["\x61\x6c\151\147\x6e"] = $objItems->align; $arrItem["\146\157\156\x74\163\x74\x79\x6c\x65"] = StringUtil::deserialize($objItems->fontstyle, true); $arrItem["\x74\145\170\x74\164\162\141\x6e\163\x66\x6f\x72\x6d"] = $objItems->texttransform; $arrItem["\x66\157\156\164\x73\x69\172\x65"] = $objItems->fontsize; $arrItem["\x74\145\x78\x74\143\157\154\157\162"] = $objItems->textcolor; $arrItem["\142\157\x72\x64\145\x72\162\x69\147\x68\x74"] = $objItems->borderright; $arrItem["\161\x72\x73\151\x7a\x65"] = $objItems->qrsize; $arrItem["\142\145\144\x69\156\147\165\x6e\147"] = $objItems->bedingung; $arrItem["\x6e\x6f\x62\x6c\141\x6e\x6b\x73"] = $objItems->noblanks; $arrItem["\151\x6e\x76\x65\x72\164"] = $objItems->invert; foreach ($arrItem["\x74\x65\170\x74\151\x74\x65\155\x73"] as $key => $value) { $feld = explode("\x7c", StringUtil::decodeEntities($value["\x66\x65\154\144"])); $arrItem["\164\x65\x78\x74\151\164\x65\155\x73"][$key]["\x66\x65\x6c\x64"] = $feld[0]; $arrItem["\x74\145\x78\164\151\x74\x65\x6d\x73"][$key]["\x6f\x70\164\x69\157\156\x73"] = $feld[1] ?? ''; $arrItem["\x74\x65\x78\x74\x69\164\x65\x6d\163"][$key]["\142\x65\144\x69\x6e\x67\x75\156\x67"] = StringUtil::decodeEntities($value["\x62\x65\144\x69\x6e\x67\165\x6e\x67"]); } if (isset($GLOBALS["\124\x4c\137\110\117\x4f\113\x53"]["\160\x64\146\x5f\x66\157\x72\x6d\x73\x50\x6f\x73\151\164\151\157\x6e\163"]) && \is_array($GLOBALS["\x54\x4c\x5f\x48\117\117\113\123"]["\x70\144\146\137\x66\157\162\x6d\163\x50\x6f\163\x69\x74\x69\x6f\156\163"])) { foreach ($GLOBALS["\x54\x4c\137\110\x4f\117\x4b\123"]["\160\144\x66\137\146\x6f\162\155\163\120\x6f\x73\x69\x74\151\x6f\156\163"] as $callback) { $arrItem = System::importStatic($callback[0])->{$callback[1]}($arrItem); } } $arrItem["\x70\141\x67\145"] = $objItems->page; while ($page != $arrItem["\160\x61\x67\x65"]) { if ($page > 0) { self::C1B98360E6714BCA818AC62C8F21E9F2($pdf); } if ($arrPDF["\141\154\x6c\160\x61\147\x65\163"] == 1) { $page++; if (is_array($seiten) && !in_array($page, $seiten)) { continue; } } else { $page = $arrItem["\x70\x61\147\x65"]; } $pdf->AddPage(); if ($pages > 0) { if ($page <= $pages) { $pdf->useTemplate($pdf->importPage($page), 0, 0, null, null, true); } else { $pdf->useTemplate($pdf->importPage($pages), 0, 0, null, null, true); } $arrPageDimensions = $pdf->getPageDimensions(); $pageheight = $arrPageDimensions["\x68\153"]; $pagewidth = $arrPageDimensions["\167\153"]; } } $text = ''; if ($arrItem["\164\171\x70\x65"] === "\x70\151\143") { $pos = array(); if (self::is_relative($arrItem["\x70\157\x73\x78\x79"][0])) { $pos[0] = $lastpos[0] + $arrItem["\160\x6f\163\170\171"][0]; } else { $pos[0] = $arrItem["\x70\x6f\x73\x78\x79"][0] + $arrPDF["\x6f\146\x66\163\145\164"][0]; } if (self::is_relative($arrItem["\160\x6f\163\170\x79"][1])) { $pos[1] = $lastpos[1] + $arrItem["\160\157\163\170\171"][1]; } else { $pos[1] = $arrItem["\160\157\163\170\171"][1] + $arrPDF["\157\146\x66\x73\x65\164"][1]; } if ($datei !== '') { if ($mode === "\x53") { if (!empty($item["\142\x65\x64\x69\156\x67\165\156\x67"])) { if (!self::checkBedingung($arrItem, $arrPDF)) { continue; } } } switch ($arrItem["\160\151\143\164\171\x70\x65"]) { case "\146\x69\154\145": $imageFactory = System::getContainer()->get("\143\x6f\x6e\164\141\x6f\56\x69\155\x61\x67\x65\x2e\146\x61\143\164\x6f\x72\x79"); $image = $imageFactory->create($rootDir . "\57" . $arrItem["\x70\151\x63\x74\x75\x72\145"], array($arrItem["\x70\x69\143\x73\x69\172\x65"][0] * 11.8, $arrItem["\x70\151\x63\x73\x69\172\145"][1] * 11.8, ResizeConfiguration::MODE_CROP)); $src = str_replace("\45\62\60", "\40", $image->getUrl($rootDir)); $bildtyp = self::getimagetype($src); if ($bildtyp != '') { $pdf->Image($rootDir . "\x2f" . $src, $pos[0], $pos[1], $arrItem["\160\x69\x63\x73\151\172\145"][0], $arrItem["\160\x69\x63\163\x69\x7a\x65"][1], $bildtyp); $hascontent = true; } break; case "\x75\160\x6c\157\141\144": if (empty($arrPDF["\141\x72\162\x46\151\x65\x6c\144\163"][$arrItem["\160\x69\x63\x74\x61\147"]]["\x76\x61\x6c\165\145"])) { break; } $temppath = $arrPDF["\x61\x72\162\106\x69\145\154\144\163"][$arrItem["\160\151\x63\164\x61\147"]]["\166\x61\154\165\145"]; $picpath = $arrPDF["\x61\162\x72\x46\x69\145\154\x64\x73"][$arrItem["\160\x69\143\164\141\x67"]]["\164\x65\155\x70"]; copy($temppath, $rootDir . "\57" . $picpath); $imageFactory = System::getContainer()->get("\143\x6f\156\x74\x61\x6f\56\151\155\141\147\x65\56\146\x61\x63\164\x6f\162\x79"); $image = $imageFactory->create($rootDir . "\x2f" . $picpath, array($arrItem["\160\x69\143\x73\x69\172\145"][0] * 11.8, $arrItem["\x70\151\143\163\x69\x7a\145"][1] * 11.8, ResizeConfiguration::MODE_CROP)); $src = str_replace("\x25\62\60", "\40", $image->getUrl($rootDir)); $bildtyp = self::getimagetype($src); if ($bildtyp != '') { $pdf->Image($rootDir . "\x2f" . $src, $pos[0], $pos[1], $arrItem["\x70\151\x63\163\x69\172\x65"][0], $arrItem["\160\151\143\163\x69\x7a\x65"][1], $bildtyp); $hascontent = true; } break; case "\x64\x61\164\141": $png = base64_decode(preg_replace("\43\x5e\144\x61\x74\141\72\151\155\141\147\145\x2f\133\136\x3b\135\53\73\x62\141\163\x65\x36\64\54\x23", '', $arrPDF["\x61\162\162\x46\x69\x65\154\144\163"][$arrItem["\x70\151\143\x74\x61\147"]]["\x76\141\154\165\145"])); $pdf->Image("\x40" . $png, $pos[0], $pos[1], $arrItem["\x70\151\x63\x73\151\172\145"][0], $arrItem["\x70\x69\143\163\x69\172\145"][1], "\120\x4e\x47"); $hascontent = true; break; } } else { $png = base64_decode(preg_replace("\43\136\144\x61\164\141\72\x69\155\141\x67\145\57\133\136\x3b\135\x2b\73\x62\x61\x73\145\66\64\54\43", '', IMGDUMMY)); $pdf->Image("\100" . $png, $pos[0], $pos[1], $arrItem["\160\x69\x63\x73\x69\x7a\145"][0], $arrItem["\160\151\143\163\151\x7a\145"][1], "\120\116\107"); $pdf->SetXY($lastpos[0] = $pos[0], $lastpos[1] = $pos[1]); $pdf->SetTextColor(0, 0, 0); $pdf->writeHTML($arrItem["\x70\151\143\164\171\160\145"] == "\x66\x69\154\x65" ? basename($arrItem["\160\151\x63\x74\x75\162\145"]) : $arrItem["\x70\151\x63\x74\141\147"], false, false, true, false, "\114"); $hascontent = true; } } else { if ($arrItem["\164\x79\x70\x65"] === "\161\x72\x63\x6f\144\x65") { if ($datei !== '') { if ($mode === "\123") { if (!empty($item["\142\x65\x64\x69\156\x67\x75\x6e\x67"])) { if (!self::checkBedingung($arrItem, $arrPDF)) { continue; } } } } } $fontattr = ''; foreach ($arrItem["\146\x6f\x6e\x74\x73\164\x79\154\145"] as $attr) { switch ($attr) { case "\151\164\141\154\x69\x63": $fontattr .= "\x49"; break; case "\142\157\x6c\144": $fontattr .= "\x42"; break; } } switch ($arrItem["\141\154\151\147\156"]) { case "\162\151\x67\150\x74": $align = "\122"; break; case "\143\145\x6e\x74\x65\x72": $align = "\x43"; break; default: $align = "\114"; } $color = $arrPDF["\x74\145\x78\164\x63\157\x6c\157\162"] != '' ? $arrPDF["\x74\x65\x78\x74\143\x6f\x6c\157\162"] : "\60\60\x30\60\x30\60"; if (strlen($color) != 6) { if (strlen($color) == 3) { $color = substr($color, 0, 1) . substr($color, 0, 1) . substr($color, 1, 1) . substr($color, 1, 1) . substr($color, 2, 1) . substr($color, 2, 1); } else { $color = "\x30\60\x30\x30\60\60"; } } $r = hexdec(substr($color, 0, 2)); $g = hexdec(substr($color, 2, 2)); $b = hexdec(substr($color, 4, 2)); $pdf->SetTextColor($r, $g, $b); if ($fontattr === "\x42\x49") { $fontattr = "\x49\x42"; } $fontidx = $fontattr == '' ? "\122" : $fontattr; $pdf->SetFont(empty($customfont[$fontidx]) ? "\x68\x65\154\x76\145\x74\151\143\x61" : "\x63\x75\163\164\x6f\155\146\x6f\x6e\x74", $fontattr, $arrItem["\x66\x6f\156\x74\163\151\172\145"]); $text = ''; $blank = $arrItem["\156\x6f\x62\x6c\x61\x6e\x6b\163"] ? '' : "\x20"; foreach ($arrItem["\164\145\x78\x74\151\164\x65\155\163"] as $item) { if ($mode === "\x53") { if (!empty($item["\x62\x65\x64\151\156\147\165\x6e\147"])) { if (!self::checkBedingung($item, $arrPDF)) { continue; } } } if (substr($item["\x66\145\x6c\144"], 0, 1) === "\42") { if (substr($item["\146\x65\x6c\x64"], 1, 1) === "\x2c" || substr($item["\146\x65\x6c\x64"], 1, 1) === "\74") { $text = trim($text); } $text .= System::getContainer()->get("\x63\157\x6e\x74\141\157\56\151\x6e\x73\145\162\164\137\x74\141\147\x2e\x70\x61\x72\163\x65\162")->replaceInline(trim($item["\146\145\154\x64"], "\x22")) . $blank; } else { if (strtolower($item["\x6f\x70\164\151\157\x6e\163"]) === "\x62\141\163\x65\x6e\x61\155\x65") { $txtteil = $arrPDF["\x61\x72\162\106\151\x65\154\144\x73"][self::normalisierung($item["\x66\x65\154\144"])][$mode === "\123" && !empty($item["\166\x61\154\165\x65"]) ? "\x62\x61\163\145\156\x61\155\145" : "\157\x72\151\147"]; } else { $txtteil = trim($arrPDF["\x61\x72\x72\x46\x69\x65\154\144\x73"][self::normalisierung($item["\146\145\x6c\144"])][$mode === "\123" ? "\166\141\154\165\x65" : "\x6f\x72\x69\x67"]); } $text .= System::getContainer()->get("\x63\157\156\164\141\x6f\56\x69\156\163\x65\x72\164\137\x74\141\147\56\x70\x61\162\x73\x65\162")->replaceInline($txtteil) . $blank; } } } if ($text === '') { continue; } while ($page != $arrItem["\160\x61\x67\x65"]) { if ($page > 0) { self::C1B98360E6714BCA818AC62C8F21E9F2($pdf); } if ($arrPDF["\x61\x6c\154\x70\x61\x67\x65\163"] == 1) { $page++; if (is_array($seiten) && !in_array($page, $seiten)) { continue; } } else { $page = $arrItem["\160\x61\147\145"]; } $pdf->AddPage(); if ($pages > 0) { if ($page <= $pages) { $pdf->useTemplate($pdf->importPage($page), 0, 0, null, null, true); } else { $pdf->useTemplate($pdf->importPage($pages), 0, 0, null, null, true); } $arrPageDimensions = $pdf->getPageDimensions(); $pageheight = $arrPageDimensions["\150\x6b"]; $pagewidth = $arrPageDimensions["\167\153"]; } } while ($page != $arrItem["\x70\141\x67\x65"]) { if ($page > 0) { self::C1B98360E6714BCA818AC62C8F21E9F2($pdf); } if ($arrPDF["\x61\x6c\x6c\x70\x61\147\145\163"] == 1) { $page++; if (is_array($seiten) && !in_array($page, $seiten)) { continue; } } else { $page = $arrItem["\160\x61\147\x65"]; } if (!self::E9EBD6F7C44D361732DA31836C7D15BD() && $page > 2) { break; } $pdf->AddPage(); if ($pages > 0) { if ($page <= $pages) { $pdf->useTemplate($pdf->importPage($page), 0, 0, null, null, true); } else { $pdf->useTemplate($pdf->importPage($pages), 0, 0, null, null, true); } $arrPageDimensions = $pdf->getPageDimensions(); $pagewidth = $arrPageDimensions["\167\x6b"]; } } if (!self::E9EBD6F7C44D361732DA31836C7D15BD() && $page > 2) { break; } if (Self::is_relative($arrItem["\160\157\163\x78\x79"][0])) { $borderleft = $lastpos[0] + $arrItem["\x70\157\163\170\x79"][0]; } else { $borderleft = $arrItem["\x70\x6f\x73\x78\171"][0] + $arrPDF["\157\146\x66\163\x65\x74"][0]; } $borderright = 0 - $arrPDF["\x6f\146\x66\163\x65\x74"][0]; if ($arrItem["\142\157\162\x64\x65\162\x72\x69\x67\150\164"] != '' && is_numeric($arrItem["\142\157\162\x64\145\162\162\151\x67\150\164"]) && $pagewidth - $arrItem["\x62\157\x72\144\x65\x72\x72\151\147\150\x74"] > $borderleft - $arrPDF["\x6f\146\x66\x73\145\164"][0]) { $borderright = $arrItem["\142\157\x72\x64\145\x72\162\151\x67\150\164"] - $arrPDF["\157\146\146\x73\x65\164"][0]; } $pdf->SetMargins($borderleft, 0, $borderright); if (Self::is_relative($arrItem["\x70\x6f\x73\170\x79"][0])) { $pos[0] = $lastpos[0] + $arrItem["\160\157\x73\170\x79"][0]; } else { $pos[0] = $arrItem["\160\x6f\163\x78\171"][0] + $arrPDF["\x6f\x66\x66\163\145\x74"][0]; } if (Self::is_relative($arrItem["\x70\x6f\x73\170\x79"][1])) { $pos[1] = $lastpos[1] + $arrItem["\160\x6f\163\x78\171"][1]; } else { $pos[1] = $arrItem["\x70\x6f\163\170\171"][1] + $arrPDF["\157\146\146\163\145\164"][1]; } $pdf->SetXY($lastpos[0] = $pos[0], $lastpos[1] = $pos[1]); $text = System::getContainer()->get("\x63\x6f\x6e\x74\141\157\x2e\x69\x6e\x73\x65\162\x74\137\164\141\x67\56\160\x61\x72\x73\x65\x72")->replaceInline($text); switch ($arrItem["\164\x79\160\x65"]) { case "\161\x72\143\x6f\x64\145": if (strlen(trim($text)) > 0) { switch ($arrItem["\142\x61\x72\x74\x79\160\145"]) { case "\104\101\x54\x41\115\x41\124\x52\x49\130": case "\121\x52\103\x4f\104\x45\x2c\x4c": case "\x51\122\103\x4f\104\x45\x2c\x4d": case "\121\x52\x43\117\x44\105\x2c\x51": case "\x51\x52\103\117\104\105\54\x48": $style = array("\x62\x6f\x72\144\x65\162" => false, "\x76\160\141\144\144\x69\x6e\147" => "\x61\x75\164\x6f", "\150\x70\141\144\144\x69\x6e\x67" => "\141\165\x74\157", "\146\x67\x63\157\x6c\157\x72" => array($r, $g, $b), "\142\x67\x63\x6f\x6c\157\162" => array(255, 255, 255), "\x6d\x6f\x64\x75\154\145\x5f\167\151\144\x74\x68" => $arrItem["\161\162\163\x69\x7a\145"], "\x6d\157\144\x75\x6c\x65\137\150\x65\x69\147\150\164" => $arrItem["\x71\162\163\x69\172\x65"]); $pdf->write2DBarcode(trim($text), $arrItem["\x62\141\162\x74\x79\x70\145"], $pos[0], $pos[1], 0, 0, $style, "\116"); break; case "\x50\x44\106\64\61\x37": $style = array("\x62\157\162\x64\145\x72" => false, "\x76\x70\141\144\144\x69\156\x67" => "\x61\165\164\x6f", "\x68\160\141\x64\x64\151\156\x67" => "\141\165\164\x6f", "\146\x67\x63\x6f\154\157\x72" => array($r, $g, $b), "\142\147\x63\x6f\x6c\157\162" => array(255, 255, 255)); $pdf->write2DBarcode(trim($text), $arrItem["\x62\x61\x72\x74\x79\160\145"], $pos[0], $pos[1], 0, $arrItem["\161\x72\x73\x69\x7a\145"] * 10, $style, "\x4e"); break; default: $style = array("\x73\164\x72\x65\x74\x63\150" => false, "\146\x69\164\167\x69\144\x74\150" => true, "\142\157\x72\144\x65\162" => false, "\x68\160\x61\x64\144\x69\156\x67" => "\x61\165\164\157", "\166\x70\141\144\x64\151\156\147" => "\x61\x75\164\x6f", "\146\147\x63\157\154\x6f\162" => array($r, $g, $b), "\x62\147\x63\x6f\154\157\162" => array(255, 255, 255), "\164\145\x78\164" => false); $pdf->write1DBarcode(trim($text), $arrItem["\x62\x61\x72\x74\x79\160\x65"], $pos[0], $pos[1], '', $arrItem["\161\162\163\x69\172\x65"] * 5, 0.3, $style, "\116"); break; } $hascontent = true; } break; case "\160\151\143": break; default: switch ($arrItem["\x74\x65\x78\x74\x74\x72\x61\156\163\x66\x6f\162\x6d"]) { case "\x75\160\160\145\x72\143\141\163\145": $text = mb_convert_case($text, MB_CASE_UPPER, "\125\124\106\55\x38"); break; case "\x6c\x6f\167\145\x72\143\x61\x73\145": $text = mb_convert_case($text, MB_CASE_LOWER, "\125\124\106\55\x38"); break; case "\143\x61\x70\x69\164\141\x6c\151\172\145": $text = mb_convert_case($text, MB_CASE_TITLE, "\x55\124\x46\x2d\x38"); break; } $pdf->writeHTML(nl2br(trim($text)), false, false, true, false, $align); $hascontent = true; break; } } } if (self::E9EBD6F7C44D361732DA31836C7D15BD() === true || $page < 2) { while ($page < $pages && $arrPDF["\141\154\x6c\x70\141\147\145\x73"] == 1) { if ($page > 0) { self::C1B98360E6714BCA818AC62C8F21E9F2($pdf); } $page++; if (is_array($seiten) && !in_array($page, $seiten)) { continue; } $pdf->AddPage(); $pdf->useTemplate($pdf->importPage($page), 0, 0, null, null, true); } } if ($page > 0) { self::C1B98360E6714BCA818AC62C8F21E9F2($pdf); } $pdf->lastPage(); if ($arrPDF["\x70\x72\157\164\x65\143\x74"] == 1) { if (in_array("\160\162\x69\x6e\164\x2d\x68\x69\x67\150", $arrPDF["\160\162\157\x74\x65\x63\164\x66\154\141\147\x73"]) && !in_array("\160\x72\151\x6e\x74", $arrPDF["\160\x72\157\164\x65\143\x74\146\x6c\141\x67\x73"])) { $arrPDF["\160\x72\x6f\164\x65\143\x74\x66\154\141\x67\x73"][] = "\x70\162\x69\156\164"; } $opass = $arrPDF["\x6f\x70\145\x6e\x70\x61\x73\x73\x77\x6f\x72\x64"]; if (empty($opass)) { $pass = $arrPDF["\x70\141\x73\163\x77\x6f\162\144"]; if ($pass == '') { $pass = null; } $pdf->SetProtection(array_diff(self::$arrProtectflags, $arrPDF["\x70\x72\x6f\x74\145\143\x74\146\154\x61\x67\x73"]), '', $pass, 1, NULL); } else { $pdf->SetProtection(self::$arrProtectflags, $opass, $opass, 1, NULL); } } $result = true; if ($mode === "\x44") { $pdf->Output($arrPDF["\x66\x6f\x72\x6d\164\151\164\x6c\145"] . "\x2e\x70\144\146", "\104"); } else { if ($hascontent) { $pdf->Output($rootDir . "\x2f" . $datei, "\106"); $_SESSION["\x70\144\146\x5f\x66\157\x72\x6d\163"]["\160\144\x66\144\x6f\x63\165\x6d\145\156\x74"] = $datei; } else { @unlink($rootDir . "\57" . $datei); $result = false; } } unset($pdf); return $result; } protected static function checkBedingung($item, $arrPDF) { $bedingung = Self::normalisierung($item["\142\145\144\x69\x6e\x67\165\x6e\x67"]); if (!isset($item["\151\x6e\x76\145\162\164"])) { $item["\x69\x6e\166\145\162\x74"] = "\x75\163\145\x64"; } if (isset($arrPDF["\x61\x72\162\x46\151\145\154\x64\x73"][$bedingung])) { if ($item["\151\x6e\x76\145\162\164"] !== "\145\155\x70\164\x79" && $item["\x69\x6e\166\145\x72\x74"] != "\61") { if ($arrPDF["\141\162\162\106\x69\145\154\x64\x73"][$bedingung]["\166\x61\x6c\165\145"] === '' || $arrPDF["\141\x72\x72\106\x69\145\154\x64\x73"][$bedingung]["\166\x61\154\x75\145"] === null) { return false; } } else { if ($arrPDF["\141\162\x72\106\x69\x65\154\144\x73"][$bedingung]["\166\x61\x6c\x75\x65"] !== '' && $arrPDF["\141\162\162\x46\151\x65\154\144\163"][$bedingung]["\166\x61\x6c\165\145"] !== null) { return false; } } } else { $found = 0; foreach ($arrPDF["\x61\x72\x72\x46\151\x65\154\144\163"] as $name => $val) { if (!isset($val["\x74\x79\160\x65"])) { continue; } if ($val["\x74\171\160\x65"] !== "\163\145\x6c\145\x63\x74" && $val["\164\171\160\145"] !== "\162\141\x64\x69\157" && $val["\x74\x79\160\x65"] !== "\143\150\x65\x63\x6b\142\157\x78" && $val["\164\171\x70\145"] !== "\143\x6d\x5f\x61\154\x74\x65\x72\156\141\x74\151\x76\x65") { continue; } if (!is_array($val["\x76\141\154\x75\145"])) { if ($item["\x69\156\166\x65\x72\x74"] !== "\145\155\160\164\171") { if ($bedingung !== self::normalisierung($val["\x76\141\154\x75\145"], $name)) { continue; } } else { if ($bedingung === self::normalisierung($val["\166\141\154\x75\x65"], $name)) { continue; } } } else { if ($item["\151\156\166\x65\x72\x74"] !== "\x65\x6d\x70\164\171") { if (!in_array($bedingung, self::normalisierung($val["\166\141\154\x75\x65"], $name))) { continue; } } else { if (in_array($bedingung, self::normalisierung($val["\166\141\154\165\x65"], $name))) { continue; } } } $found = 1; } if (!$found) { return false; } } return true; } protected static function C1B98360E6714BCA818AC62C8F21E9F2($pdf) { if (!self::E9EBD6F7C44D361732DA31836C7D15BD()) { $x = $pdf->GetX(); $y = $pdf->GetY(); $arrPageDimensions = $pdf->getPageDimensions(); $pdf->SetXY(15, $arrPageDimensions["\150\153"] - 14); $pdf->writeHTML("\74\163\160\141\x6e\40\x73\x74\171\154\145\x3d\42\x63\x6f\x6c\157\162\x3a\43\146\146\60\60\x30\x30\x3b\x62\141\143\x6b\147\x72\x6f\x75\x6e\x64\55\x63\157\154\x6f\x72\72\43\x66\x66\145\x65\x65\145\x3b\146\x6f\156\x74\x2d\x73\x69\x7a\145\x3a\71\160\170\73\146\x6f\156\x74\55\x77\x65\151\x67\x68\164\x3a\142\157\x6c\x64\x22\x3e\46\156\x62\163\160\x3b\46\x6e\142\x73\x70\x3b\x3d\75\40\x44\x45\115\x4f\x20\x76\x65\x72\163\x69\x6f\156\40\x6f\146\40\144\157\55\x77\x68\151\154\x65\57\x63\x6f\156\164\141\157\55\160\144\x66\x66\157\162\155\163\55\x62\x75\x6e\x64\154\x65\x20\55\x20\x6d\141\x78\151\x6d\x75\x6d\40\62\40\x70\x61\147\145\x73\x20\x2d\40\x42\x75\x79\x20\x4c\x69\x63\x65\x6e\x63\145\x20\153\145\171\x21\x20\75\x3d\x26\156\142\163\x70\x3b\46\x6e\142\x73\x70\x3b\74\x2f\163\x70\141\156\x3e", false, true, true, false, "\114"); $pdf->SetXY($x, $y); } } protected static function E9EBD6F7C44D361732DA31836C7D15BD() { $licence = $_ENV[constant("\x50\122\117\104\125\x43\x54") . constant("\x4c\x49\132\105\116\132\120")]; if ($licence == '') { $licence = Config::get(constant("\120\x52\117\x44\125\x43\x54") . constant("\x4c\111\132\x45\x4e\x5a\120")); } $k = str_split($licence, strlen(constant("\x56\60\126\64\x58\112\105\167\164\166\62\x46\x43\x76\x58\x6c\122\x4e"))); $p = eval("\x72\x65\x74\165\x72\x6e\x20\x73\x75\142\163\x74\162\x28\x22\x30\60\x30\60\x22\56\x73\x74\x72\164\157\165\160\x70\145\x72\x28\x64\145\x63\x68\145\x78\50\143\162\x63\x33\x32\50\x6d\x64\65\50\42" . constant("\120\x52\x4f\x44\x55\x43\124") . "\72\42\56\163\165\x62\x73\164\x72\x28\126\105\122\x53\111\117\x4e\x2c\x30\x2c\61\51\x2e\x22\x3a" . ($k[0] ?? '') . "\42\x29\51\x29\x29\54\x2d\x34\x29\x3b"); return !empty($p) && isset($k[1]) && $p === $k[1]; } public static function encrypt($varValue, $dc = null) { if (empty($varValue)) { return ''; } mt_srand(6152); $out = array(); for ($x = 0, $l = strlen($varValue); $x < $l; $x++) { $out[$x] = ord($varValue[$x]) * 3 + mt_rand(350, 16000); } mt_srand(); return implode("\x2e", $out); } public static function decrypt($varValue, $dc = null) { if (empty($varValue)) { return ''; } mt_srand(6152); $out = array(); $blocks = explode("\x2e", $varValue); foreach ($blocks as $block) { $ord = (intval($block) - mt_rand(350, 16000)) / 3; $out[] = chr($ord); } mt_srand(); return implode('', $out); } public static function normalisierung($name, $field = '') { if (!empty($field)) { $field .= "\176"; } if (is_array($name)) { for ($i = 0; $i < count($name); $i++) { $name[$i] = $field . str_replace(array("\x20", "\50", "\x29"), array("\x5f", '', ''), strtolower($name[$i])); } } else { $name = $field . str_replace(array("\40", "\50", "\51"), array("\x5f", '', ''), strtolower($name)); } return $name; } public static function getFormFields($formid) { $arrFields = array(); $cm_text = ''; $cm_nr = 0; $objFormField = Database::getInstance()->prepare("\x53\x45\x4c\x45\103\124\40\x2a\40\x46\122\117\x4d\x20\164\x6c\x5f\146\157\162\155\137\x66\x69\145\x6c\x64\40\127\x48\105\x52\105\40\151\156\166\151\163\151\142\x6c\145\74\76\x31\x20\101\x4e\x44\40\x70\151\144\75\77\40\x4f\x52\x44\105\x52\40\102\131\x20\x73\x6f\x72\164\x69\156\147")->execute($formid); if ($objFormField->numRows < 1) { return $arrFields; } while ($objFormField->next()) { $arrRow = array(); $arrRow = $objFormField->row(); $options = StringUtil::deserialize($arrRow["\157\160\x74\x69\x6f\156\x73"]); switch ($arrRow["\164\171\x70\x65"]) { case "\163\165\142\x6d\x69\x74": break; case "\163\145\154\145\x63\x74": case "\x72\x61\144\x69\157": case "\143\150\145\x63\153\142\x6f\x78": if (empty($options)) { break; } foreach ($options as $opt) { $arrFields[$arrRow["\x6e\141\155\145"] . "\176" . $opt["\166\x61\x6c\165\x65"]] = $arrRow["\156\141\x6d\145"] . "\176" . $opt["\x76\141\154\165\145"]; } break; case "\143\x6f\x6e\x64\151\164\x69\157\156": case "\164\145\x78\x74": case "\x74\x65\170\164\x61\x72\145\141": case "\150\151\144\x64\145\156": $arrFields[$arrRow["\156\x61\155\x65"]] = $arrRow["\x6e\141\155\x65"]; break; case "\143\x6d\137\141\x6c\x74\145\162\156\141\164\x69\x76\145": if ($arrRow["\x63\x6d\137\141\154\x74\x65\162\156\x61\164\151\166\145\x54\x79\x70\x65"] === "\x63\155\x5f\163\x74\157\160") { break; } if ($arrRow["\x63\155\x5f\x61\x6c\x74\145\162\x6e\141\x74\x69\166\x65\x54\x79\x70\x65"] === "\x63\x6d\137\163\x74\x61\162\x74") { $cm_text = $arrRow["\156\141\155\x65"]; $cm_nr = 0; } else { $cm_nr++; } $arrFields[$cm_text . "\176" . $cm_nr] = $cm_text . "\176" . $cm_nr; break; } } asort($arrFields, SORT_FLAG_CASE); return $arrFields; } protected static function getimagetype($src) { $file = System::getContainer()->getParameter("\153\145\x72\x6e\x65\154\x2e\160\162\x6f\152\x65\x63\x74\x5f\144\x69\x72") . "\x2f" . $src; (new File($src))->createIfDeferred(); if (!file_exists($file)) { return ''; } $size = getimagesize($file); if ($size[2] == IMAGETYPE_GIF) { return "\x47\111\106"; } else { if ($size[2] == IMAGETYPE_JPEG) { return "\x4a\x50\105\x47"; } else { if ($size[2] == IMAGETYPE_PNG) { return "\x50\x4e\x47"; } else { return ''; } } } } protected static function is_relative($pos) { if (substr($pos, 0, 1) === "\x2b") { return true; } if (substr($pos, 0, 1) === "\x2d") { return true; } return false; } }