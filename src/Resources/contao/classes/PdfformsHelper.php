<?php
namespace Softleister\PdfformsBundle; use Contao\File; use Contao\Config; use Contao\System; use Contao\Backend; use Contao\Database; use Contao\Validator; use Contao\FilesModel; use Contao\StringUtil; use setasign\Fpdi\Tcpdf\Fpdi; use Contao\Image\ResizeConfiguration; use Contao\CoreBundle\ContaoCoreBundle; use Symfony\Component\VarDumper\VarDumper; define("\x4c\111\132\x45\116\x5a\120", "\x4c\151\x63\x65\156\143\145"); define("\120\122\117\104\x55\103\124", "\160\x64\146\x66\157\x72\155\x73"); define("\126\60\126\x34\130\x4a\105\167\164\x76\x32\x46\103\x76\x58\x6c\122\x4e", "\x31\x32\x33\x34\65\66\x37\x38\x39\60\x31\62\63\x34\65\66\x37\x38\x39"); define("\126\x45\122\x53\111\117\116", ContaoCoreBundle::getVersion()); define("\111\x4d\x47\104\125\x4d\115\x59", "\144\141\x74\x61\72\151\x6d\141\x67\x65\x2f\x70\156\x67\x3b\x62\x61\x73\145\66\64\x2c\x69\x56\x42\117\x52\x77\60\x4b\x47\147\157\x41\x41\101\x41\116\123\x55\x68\x45\125\x67\x41\101\101\x4a\131\101\101\x41\x41\61\x43\101\x49\101\x41\101\x41\163\66\x34\130\61\x41\x41\101\101\x47\x58\x52\x46\x57\x48\122\x54\x62\62\x5a\x30\144\62\x46\x79\x5a\x51\x42\102\x5a\107\71\151\x5a\x53\x42\112\x62\127\106\156\132\x56\x4a\154\x59\127\122\x35\143\143\x6c\x6c\120\x41\x41\x41\x43\60\x78\112\122\105\x46\125\145\x4e\162\163\130\x47\x6c\130\62\x7a\157\x51\152\122\x7a\x6a\67\101\164\x72\x6f\x66\124\x2f\57\x36\x64\x2b\x37\155\166\124\121\157\104\163\151\x51\117\62\63\170\x31\x4e\64\151\x66\x4a\123\53\124\x45\167\117\x73\65\x31\x71\x45\x63\103\x49\157\153\x7a\65\x33\x6c\172\155\150\x53\71\x2f\166\63\x37\x37\x56\161\57\x4d\x33\104\x71\125\122\121\121\x56\151\116\x43\163\112\x71\126\x42\x42\x57\x45\106\x61\152\x67\162\x41\x61\106\131\124\126\x71\x43\x43\x73\x49\113\x78\107\102\x57\105\61\x4b\147\151\162\x55\125\106\131\x51\x56\151\116\103\163\x4a\161\126\x42\x42\x57\x34\71\x6a\150\x71\162\70\x49\x49\x66\102\x50\x2b\63\164\105\x77\63\150\x50\x79\x72\x54\143\53\x51\130\x65\x62\x72\x66\x43\x77\x64\126\x6f\150\123\x4b\x4c\x35\x4b\x32\x4f\170\x65\x56\123\113\127\x76\113\x72\x59\x58\x38\167\130\x37\110\x41\64\x39\166\117\122\121\160\141\122\x42\165\x74\x39\x73\x77\104\x4f\120\x6c\x4d\x61\x58\x75\x4f\117\67\x5a\155\146\106\x32\x33\57\144\x54\x6a\170\166\x4a\x38\x33\x6d\131\156\63\x76\x45\x49\x41\150\x65\130\61\x39\x46\x78\x73\110\x71\162\153\163\x37\x57\x67\116\x41\x5a\x77\64\x43\x6f\145\x79\x49\x52\124\x7a\120\105\70\x36\x70\104\163\x5a\170\110\x4b\172\163\142\67\145\x62\172\x65\x62\x74\71\x58\x57\x39\x57\x75\107\67\145\164\x5a\x47\161\x34\x57\x4e\166\x47\x61\x7a\x30\x57\x69\143\145\122\x37\116\x44\70\120\x38\x4e\x54\105\102\x69\65\x43\147\x54\x6f\120\x50\x71\144\146\120\71\162\x69\64\161\156\x59\x38\x2f\166\x36\x39\127\x69\x35\x6a\x63\127\x42\161\164\x39\x65\67\166\142\70\63\104\166\x48\162\x78\64\x2f\147\x37\x53\x31\x31\141\141\x78\x37\x39\x2b\61\x62\x73\x39\153\x4d\115\172\104\x41\64\160\120\156\65\x2b\146\170\x57\x4b\124\x42\110\x49\130\150\53\144\130\x56\71\145\60\164\132\x47\143\152\131\151\x6a\x54\x36\x4d\145\120\x31\53\61\127\126\122\157\x73\70\165\130\x75\x72\x6e\71\53\x48\x68\61\162\x69\x45\x4a\141\x31\127\x77\x36\x58\x53\60\x57\x69\57\x6c\x63\x4d\x79\x42\x6c\x51\106\x62\64\x49\x6d\x30\124\157\164\x76\x76\144\x37\160\x64\151\107\164\156\x72\x78\153\110\x68\150\x36\x4d\x66\x76\64\60\144\113\67\x6f\x41\101\x53\x4d\103\170\142\105\x58\161\131\152\170\x61\x73\161\150\x4b\153\x37\60\x54\x73\172\x64\102\171\162\167\x79\171\141\x37\130\131\164\x41\167\117\163\x69\143\144\x57\144\x30\x6e\x61\x73\146\63\104\121\x43\x49\x77\141\x4b\x69\153\x67\143\x42\70\x50\x75\x38\x4e\x68\60\x63\142\x33\x39\x62\63\x6e\170\64\146\143\125\x34\x38\x6a\160\116\164\x7a\142\x75\x6a\x79\165\x2f\172\x36\130\121\65\156\x2b\115\164\x46\x31\144\130\x38\x43\115\65\62\x6b\x4d\x4c\132\x67\x69\x32\127\120\x68\64\112\x7a\157\104\112\53\154\166\116\162\126\163\x45\x34\x54\105\x59\143\110\x69\x39\x47\x41\147\71\x34\x4c\125\125\160\131\123\101\155\143\x41\165\153\146\x73\101\x76\x6e\103\x37\x45\142\x2f\57\x4d\120\107\65\61\150\x37\131\167\132\x6d\x39\x76\x4c\x79\53\53\x64\x50\x43\x68\120\117\170\57\110\x45\x6b\156\x63\123\x55\x6e\x7a\x30\104\102\156\151\x38\x39\x66\x72\66\x46\x44\x41\x73\116\x33\x49\x39\172\x63\x5a\117\107\x47\114\x52\123\161\66\102\x2f\107\142\x7a\122\x35\107\x49\x37\114\163\x42\x41\131\x77\114\102\147\x6c\x39\103\x62\x6b\x72\53\x52\124\167\111\x66\x56\66\65\x76\x31\x47\x69\165\70\132\x55\166\x67\146\x52\x6c\x70\x43\122\161\x42\53\103\x53\104\120\64\112\x69\103\160\x56\61\110\x44\167\150\x4d\141\142\x54\x6c\126\121\111\x69\x44\x75\124\x46\x77\x69\102\152\x65\104\123\125\x34\53\122\x2f\x67\x34\105\161\165\130\171\x38\x63\x38\x66\x4f\x70\x35\x4f\152\155\161\123\x5a\x4c\125\67\156\127\x61\x72\x56\x57\143\156\x47\125\126\121\111\120\151\x41\x56\60\154\x77\116\x4c\x63\x6d\x41\x78\67\x69\57\x64\x58\116\124\x53\107\113\125\157\x43\x6d\x36\x6b\57\153\x6c\x71\x34\125\106\101\x35\x39\110\60\53\x62\164\x42\x75\64\x55\x49\152\x31\122\x44\x37\x47\123\172\106\106\x7a\x4a\153\101\x6a\x67\115\x79\x4d\x72\x79\70\152\x43\171\131\x45\146\x44\x44\x32\x63\141\x50\x6a\53\124\153\x46\x66\x55\151\x68\x6c\x79\166\x39\64\146\104\x2f\x6d\x41\x41\70\101\x53\x48\143\x43\x6e\x42\142\150\147\117\x7a\70\71\x68\66\x79\71\x50\124\64\x46\117\124\64\101\151\x51\151\115\111\x44\x6d\x6a\144\121\x51\x57\x43\x75\x47\x36\57\146\157\x56\53\x68\x45\127\x63\x6b\x30\170\x32\x42\x43\71\145\x50\157\x52\103\x57\153\x42\166\x4d\105\152\x2b\x43\127\112\x39\x4b\x79\x4d\x51\131\x6f\130\154\131\x76\x47\x6d\132\x79\x59\x47\x2b\x63\113\166\x6d\101\x4d\x35\101\147\115\x62\x51\x35\170\x4e\112\x6a\151\62\157\53\x4d\x48\131\x67\x4a\x36\x44\x4b\x6f\x5a\70\121\x68\x44\144\123\107\101\117\x72\x79\x34\x51\104\x6f\x42\x7a\x32\153\x41\101\x45\x2b\x37\155\105\65\x62\x37\142\x61\116\101\156\x45\x65\106\x52\141\115\x4c\57\106\104\117\141\x56\147\144\x71\x62\x6b\152\x67\170\150\114\141\60\147\147\101\121\114\113\x4d\141\103\x68\x6e\104\x7a\x79\x56\x76\x57\x64\x68\x44\121\145\162\107\147\132\x31\131\167\70\x32\x52\155\160\x70\157\x43\x2b\126\113\153\x73\110\131\62\x6a\x52\124\103\60\124\125\x41\x78\x32\x50\x38\x73\106\x48\x71\x49\x54\x6b\66\131\147\x4b\x41\63\x45\x32\x49\71\x67\x4e\163\145\142\x32\62\x6a\x49\152\x52\x55\141\116\x4d\117\x6b\120\160\x49\x4b\x57\x34\130\162\167\165\x54\x41\61\x6f\x47\141\146\110\60\x34\114\x4c\161\x4b\70\60\x6d\x6b\x32\156\145\x46\x41\153\111\x69\x50\x54\142\x54\130\x35\x41\x59\53\101\172\x33\x54\61\171\x4d\x65\107\x61\114\115\x6d\x77\151\161\154\67\146\161\102\x34\x55\147\x59\166\x77\x4f\x65\x4d\111\162\147\x61\132\x48\x64\x38\x7a\106\x77\x68\156\x61\x33\151\60\102\64\57\145\x55\114\x35\x32\x31\57\102\x35\60\x35\x6b\x39\125\x51\123\151\x66\62\125\x6b\103\147\x67\150\x74\112\102\x6b\111\x56\126\x38\x54\x4c\x75\x56\162\166\x73\x49\171\x31\125\x51\124\x65\x41\x53\62\112\x34\123\143\x64\143\154\63\64\x54\x4b\x67\x49\156\x55\110\132\x46\114\x45\113\112\154\111\63\x45\163\x65\105\x43\161\162\x35\x65\53\170\103\x45\146\x2b\x73\101\x4a\x41\117\x66\110\102\170\x67\x51\x65\x45\x55\165\113\x68\x56\x4e\63\66\141\x35\113\113\156\122\x55\x71\x6e\102\x35\x4f\x7a\114\102\x43\103\x48\62\x72\x6d\x41\x35\x2b\141\103\121\x6f\152\x36\x55\x58\x6e\143\x39\155\x71\166\156\151\122\144\103\x42\x75\x75\x4e\60\x65\172\61\152\125\x34\151\x56\x63\163\x66\x63\71\102\171\53\57\x56\130\x58\114\x66\x49\121\162\x64\141\132\x34\154\x63\117\104\165\102\71\x66\156\156\x4a\127\160\x76\x30\144\130\71\x44\125\151\x46\x4c\141\x2f\57\x46\x45\150\154\144\104\105\x34\x50\61\170\x64\172\x55\142\x77\111\x68\x58\x58\162\x39\x53\x4f\157\104\132\124\104\x6b\104\152\143\x56\66\x66\x66\x68\x38\146\x7a\155\x6b\x32\166\x30\x66\x42\x56\x48\171\64\x74\162\x4a\71\142\161\141\x47\104\x4a\x63\124\144\113\161\150\145\x34\x51\x6e\112\x4c\x74\124\x52\171\x66\125\x54\x71\x62\107\x7a\132\x41\151\170\63\154\155\152\x34\x62\150\x75\x58\x48\153\x42\x7a\x77\141\x56\151\x41\116\x6b\x4a\x4a\116\x36\x4d\170\x41\x65\102\123\110\151\x6c\166\x45\70\x4c\123\x41\x6e\x4e\x78\x4c\123\x45\x44\x55\110\x49\101\x53\117\147\x56\x65\x79\127\104\x74\142\x59\x62\113\x55\62\103\x7a\x75\111\131\x34\x6d\x67\x31\124\112\x43\64\x4c\121\62\155\x72\x5a\65\65\125\x4e\111\x53\x79\x67\60\x55\104\70\x59\101\x35\107\153\125\71\103\127\x4f\166\63\x64\170\117\103\x51\112\x55\163\122\x41\131\x5a\106\x65\125\x79\121\x75\113\170\x31\154\x57\x68\x4a\x6d\166\x78\70\121\123\64\x4d\x69\114\157\x62\62\53\x31\x33\x53\x30\x51\156\x51\x53\153\x42\161\x2f\110\151\132\123\170\113\x46\60\144\x36\102\x43\123\126\x62\151\x75\x5a\x59\x6e\x53\150\x76\146\156\x4c\57\125\x38\x48\164\x4d\102\162\x4b\x6e\101\x78\144\125\126\x36\x46\x4c\x36\132\x64\x4d\x70\126\x67\152\113\x41\x4e\x56\x51\x32\143\122\x6d\164\x51\x72\62\x4e\x65\147\126\x47\120\x62\53\143\x6f\120\65\117\161\x55\x54\x52\x52\x58\x57\143\x54\147\x64\126\111\x6b\x4d\x41\x47\166\x47\166\103\x6d\x4b\x6f\105\156\167\147\122\121\163\x6c\141\x43\x4c\x48\x48\x38\67\110\x4b\x71\x61\161\172\x72\x41\111\112\x47\66\65\122\145\x50\157\113\x2b\102\x6e\143\x56\153\x56\x66\116\x54\66\x71\x76\x32\x51\x6b\x67\x34\104\114\143\x73\x62\x31\x43\124\x68\x68\x56\124\117\66\65\150\121\x74\x79\x65\71\x4a\x59\x77\121\x56\x58\124\x34\121\x6f\x4b\130\121\160\155\x56\x57\123\167\x4a\152\x79\x6b\x75\67\143\x59\160\x76\x57\x74\x54\x6b\146\116\112\x63\x68\x32\153\x59\123\163\x56\x71\153\121\61\157\160\156\x70\x55\x39\120\124\71\117\x58\x6c\64\x50\131\x51\104\117\121\x56\x38\x42\151\x41\157\166\163\x2f\166\115\132\x4b\141\167\161\154\x42\x42\161\x45\x67\x63\106\154\130\64\126\x6b\x6f\x55\104\x6a\x41\60\146\127\x73\x77\121\x46\x72\62\x64\x68\x34\x6b\142\102\x52\121\107\x54\x45\x32\57\131\x46\x4e\164\x36\125\165\x31\x35\116\x64\170\106\157\x76\106\x68\61\x48\x45\x44\x78\67\154\63\126\122\x49\125\x71\157\123\x38\x64\152\64\104\116\131\117\116\167\x56\x33\65\x2b\x78\x6a\154\x54\60\x4e\x51\x33\161\147\x55\150\x4b\x2b\131\125\x37\x57\x49\130\x47\x47\112\x4a\x2b\x45\x46\123\142\x7a\x48\x44\x37\x4d\150\x31\60\160\x35\101\x53\x49\121\165\116\x64\110\107\x6c\163\113\145\103\x5a\x61\x6b\x32\x4c\160\x62\x61\x56\160\x64\x48\x2f\x66\x4a\x33\152\x63\x43\x32\104\142\65\x68\164\151\x76\x52\x73\x30\x33\103\x50\x52\x74\x69\x67\62\x34\116\62\62\x37\152\151\x78\x32\122\153\105\x58\x44\160\122\x71\125\107\x56\x42\131\155\x61\x33\152\x4f\x33\122\155\x4d\101\111\153\106\x50\x38\x70\x6b\157\x5a\x52\x66\x37\53\x38\67\x68\x63\x72\143\117\151\71\172\x53\60\x56\x51\x63\103\113\x34\67\167\x6b\151\x76\153\x37\104\71\71\x58\162\142\63\150\144\147\162\104\147\x34\161\101\x6b\170\157\x55\101\130\x79\x41\x2f\x6a\x45\x61\127\126\112\x43\141\x58\x37\132\142\153\x30\x62\112\66\x71\103\124\141\120\162\x43\x79\132\116\116\x51\x32\160\160\61\104\x41\x46\143\x59\x67\105\x48\132\124\x64\x30\x54\61\x52\112\x55\x4f\157\x6c\x70\144\x69\63\x51\145\x45\x36\x75\156\147\122\x65\x73\x46\165\x51\172\x57\155\145\166\160\131\x4a\x77\x6a\x70\x71\111\154\x5a\x4a\x68\115\163\x71\110\x6c\143\153\153\154\141\143\126\161\165\x63\x41\162\x39\x47\112\155\112\x50\x4e\71\115\164\x6d\x30\153\167\x7a\x50\x7a\67\x76\71\166\152\104\151\x74\117\70\57\120\x7a\64\x47\x70\172\x58\x46\x66\x44\x36\105\x54\120\x45\150\105\124\130\x79\x51\x63\x72\107\x6c\121\x4b\x78\156\x6f\112\x45\x42\147\x61\x55\x65\165\x64\121\x69\111\x36\104\143\115\x47\125\x65\67\62\x65\x6f\x31\70\57\x73\144\x6f\x5a\161\157\104\163\x38\x7a\x77\156\163\71\x5a\x78\x63\x70\172\120\142\x4d\144\61\171\162\113\57\x6e\125\x61\x34\114\157\170\115\x52\x59\151\x61\x5a\x52\124\x64\x46\106\111\105\150\x65\x73\130\70\x6d\x72\160\122\x41\130\x66\x58\x54\x2f\x70\170\124\154\x57\117\x30\x38\x76\150\x31\x4c\x38\x33\x74\102\x49\x78\131\x59\144\161\x54\x45\x2b\153\x65\66\127\102\x4b\107\x53\x73\x2b\146\x48\x4f\x53\x47\x35\124\x43\x48\70\x6f\x41\x52\155\122\127\131\166\170\171\152\x33\x4b\x30\153\x51\157\x45\x79\x72\x52\110\141\x42\167\x33\146\x32\x56\x53\122\61\x35\165\172\154\x78\x52\x36\x59\124\66\x53\x31\x4a\x64\x2f\141\125\57\60\141\x6f\x51\x35\160\x59\x70\162\122\125\x46\61\x4e\154\153\x61\152\120\121\x75\x6c\111\112\x54\x62\x68\60\107\x5a\151\x63\x77\x48\104\x49\117\147\x74\x4d\124\x43\x66\x56\105\53\x71\x72\150\170\141\x6f\x6d\131\172\x51\131\130\106\x30\x6c\x6d\x69\167\151\147\144\155\x33\x78\122\122\126\145\102\x37\x6b\x39\x6d\112\166\172\57\143\154\156\107\x57\x4c\x35\105\112\x34\x42\121\x74\x63\116\x74\71\x76\125\103\x51\61\x5a\x47\157\62\163\145\x39\x65\x35\167\155\x6c\x75\64\x58\x6d\x33\x39\x2f\146\125\x63\112\170\114\170\114\x48\x52\x6e\61\53\57\x70\x70\117\112\161\151\x4a\111\x54\151\x67\x69\104\x6f\144\x71\x49\x78\x33\x77\x41\60\116\65\145\130\157\x79\x4e\x68\x6f\x2f\x50\107\x43\126\x66\162\53\x66\150\x53\112\104\x6a\157\x54\61\141\x54\x77\53\63\x64\130\x2f\x62\171\x44\60\120\x4c\144\145\x33\x36\132\62\x75\x38\157\113\x54\x6e\x71\x35\117\141\x74\x4d\112\123\x57\x75\x47\x59\60\x30\x5a\121\152\71\114\141\x32\x6a\x33\104\147\115\x67\112\153\156\127\103\164\145\x55\122\165\x46\x4f\x56\125\x64\x44\x49\146\147\x71\x37\65\151\x37\x71\x78\x41\152\66\x50\122\x71\53\57\x44\106\x6c\x50\x76\x6a\122\105\x79\112\65\115\x4a\x49\115\124\x4d\172\171\111\61\x37\71\104\53\112\114\x31\143\141\x76\x52\x79\165\x61\65\127\112\x42\x44\x43\x6d\64\127\66\x4e\163\x44\x33\x77\162\x2f\126\x39\160\61\153\53\x52\102\x36\x38\x74\x4d\x4f\166\x74\x34\x46\163\160\x55\x4e\x71\115\x31\x32\117\x7a\x5a\105\x47\x42\x41\x38\x78\x2b\x58\x56\x46\x62\x4a\115\x6a\x58\172\102\121\x34\142\x68\70\x33\147\70\156\x30\64\67\166\x52\67\60\152\x37\165\x45\70\103\111\126\x2b\x35\x5a\x4c\67\x71\x6c\115\x4a\141\127\127\x74\67\x35\64\x49\x36\x57\x32\102\143\x30\130\146\166\166\155\67\161\x34\63\x47\117\x43\110\143\x69\102\x55\153\67\102\111\x66\154\x37\105\155\125\x36\x6a\x78\x44\117\102\53\106\106\112\x32\164\64\x45\147\70\x42\x6f\x69\x57\x44\123\155\x79\171\x79\65\x41\147\x49\x68\x71\151\x57\x31\x75\x4a\103\104\x37\127\x58\66\x52\x4c\166\144\x4c\x75\x58\116\172\144\152\x76\132\127\x55\x66\60\x42\x4f\117\130\154\53\x6a\x6b\x73\x47\130\x4c\155\157\67\x5a\x73\102\125\x37\x51\156\x44\101\x46\x32\167\x36\111\112\163\130\142\x55\x64\124\x47\x63\x55\65\155\x58\x54\143\x61\x6e\162\x66\x67\165\105\x4d\x4b\162\66\x53\145\114\x5a\x4a\115\132\x41\x4c\x41\70\x4d\x66\x66\107\x47\x30\61\x67\146\x44\126\150\62\x56\x66\x49\150\66\117\161\164\x2b\x73\x61\x74\x72\126\141\114\162\156\53\x6f\161\66\104\147\x2f\x55\x48\x41\x37\x71\x4c\145\x48\147\x77\107\x37\x71\106\130\x55\154\x33\x76\170\171\x55\67\x50\114\66\x75\156\105\157\127\160\71\125\x7a\123\x6d\57\172\x4b\60\142\x69\x70\x65\x34\x69\111\x42\x45\x74\111\x78\121\165\x73\x66\x38\170\151\x51\x75\x71\150\153\x76\144\x68\x4d\112\x51\x4c\x35\115\161\145\157\x4e\x67\71\120\x54\x50\162\x37\x30\123\103\x49\103\x69\x66\x66\x36\x66\130\x41\154\127\107\123\x4e\70\x78\x59\x37\x58\141\x45\153\x42\x30\x65\126\126\145\114\x72\62\61\165\163\x41\x46\146\60\115\x52\172\126\116\122\x35\101\x31\126\142\117\x76\126\111\x64\163\x53\x70\132\x4a\x30\x46\120\150\110\171\x53\x70\146\x34\65\x4e\x2b\160\x33\x54\x57\123\x45\x6b\144\x78\122\x76\x59\x65\x4b\71\x71\x45\x46\60\x5a\x54\x72\x5a\57\x46\x65\61\107\x50\x52\x62\150\145\161\104\110\x43\x71\x43\163\117\144\124\141\x66\x78\117\x6b\113\x36\102\x4e\x43\x51\x64\x72\x65\x62\x69\x69\x49\x4f\146\x2f\146\x74\x47\71\66\x79\155\105\x35\x39\x33\64\71\x62\166\111\63\x4a\x55\146\x7a\x52\x55\x54\102\x74\107\x58\124\x35\111\62\x72\x4d\x31\x31\111\57\x4f\x73\x4a\x49\156\61\x36\110\125\x34\x55\155\x31\x50\70\x56\107\111\160\x70\x66\x48\x41\x51\121\144\67\x6f\111\x73\x45\67\61\66\165\x56\x64\152\x35\132\x47\152\x58\x73\103\x59\x35\x6f\x71\x39\x7a\147\x4d\167\x33\x68\x37\x67\143\x6a\142\x36\116\x79\x69\126\x36\53\x67\147\121\x35\x2f\x46\102\114\163\x55\112\x62\111\x73\x6e\x2b\x2b\141\53\106\x2f\x48\167\147\x32\172\x37\125\x54\x37\53\x79\x49\x77\113\60\117\x61\112\105\x67\x4b\x66\107\123\x64\154\x36\x41\66\x76\106\111\x73\141\x46\115\x32\x43\152\x30\x49\x42\57\152\x51\x5a\104\x79\120\121\x6e\x35\171\124\x55\131\x5a\x76\127\x4a\63\x30\105\x38\167\143\x64\62\x31\x30\161\161\102\x43\123\71\61\145\132\x6e\x76\167\x35\145\123\x59\142\x39\x69\x58\153\x4c\x63\67\x42\160\x5a\114\124\157\162\x33\166\123\155\105\x4b\x32\x64\160\x39\105\115\126\144\167\x4e\x59\120\145\x54\x42\x51\x78\122\x39\144\x59\x49\x39\161\172\x4e\x2f\144\x33\143\154\166\x6c\166\167\172\66\171\122\110\170\115\x4a\x59\125\x4f\x34\x52\61\115\150\x6d\127\151\121\71\x34\x43\x6e\x54\x53\x6d\172\x46\x50\x48\x71\160\x2b\x49\x32\x73\x61\163\x6e\x49\x58\x62\122\x6c\x39\x44\63\x36\123\x2f\x38\x56\131\101\103\61\62\x4b\103\63\x30\x48\122\101\131\x77\x41\101\101\101\102\112\122\x55\x35\x45\162\153\112\x67\x67\147\x3d\x3d"); class PdfformsHelper extends Backend { protected static $arrProtectflags = array("\155\157\x64\151\x66\x79", "\x65\170\x74\162\x61\143\164", "\160\x72\151\156\x74", "\160\x72\151\x6e\x74\55\150\151\147\150", "\x63\157\160\171", "\x61\x6e\x6e\157\x74\55\146\x6f\x72\x6d\x73", "\x66\x69\154\x6c\x2d\146\x6f\162\155\x73"); public static function pdfforms($mode, $arrPDF, $datei = '') { $rootDir = System::getContainer()->getParameter("\x6b\x65\x72\x6e\145\x6c\56\160\162\157\x6a\x65\143\164\x5f\144\x69\x72"); $hascontent = false; if ($mode === "\x53") { $_SESSION["\160\x64\146\137\x66\x6f\x72\x6d\163"]["\x70\144\146\144\x6f\143\165\x6d\145\x6e\x74"] = ''; } $l = array(); $l["\141\x5f\155\145\x74\141\137\144\x69\162"] = "\x6c\164\162"; $l["\x61\x5f\155\x65\164\141\137\143\x68\x61\x72\163\x65\164"] = System::getContainer()->getParameter("\153\145\162\156\x65\154\56\x63\x68\141\162\x73\x65\x74"); $l["\x61\x5f\x6d\x65\x74\x61\x5f\x6c\x61\x6e\x67\x75\x61\x67\x65"] = $GLOBALS["\x54\x4c\x5f\114\101\116\x47\125\101\107\x45"]; $l["\167\x5f\x70\x61\x67\145"] = "\160\x61\147\x65"; $font = PDF_FONT_NAME_MAIN; $pdf = new Fpdi(PDF_PAGE_ORIENTATION, "\x6d\x6d", PDF_PAGE_FORMAT, true, "\x55\x54\106\x2d\x38", false, false); $pages = 0; if (!empty($arrPDF["\x76\157\x72\x6c\x61\147\145"]) && file($rootDir . "\x2f" . $arrPDF["\166\157\162\154\141\147\x65"])) { $pages = $pdf->setSourceFile($rootDir . "\x2f" . $arrPDF["\x76\x6f\x72\154\x61\x67\145"]); } $pdf->SetCreator(PDF_CREATOR . (self::E9EBD6F7C44D361732DA31836C7D15BD() ? "\54" : "\x2c\40\x44\x45\x4d\117") . "\40\x63\157\x6e\x74\141\157\x2d\160\x64\x66\146\157\162\155\x73\x2d\142\x75\156\x64\x6c\x65"); $pdf->SetAuthor($arrPDF["\141\x75\x74\150\x6f\x72"]); $pdf->SetTitle($arrPDF["\164\151\164\x6c\145"]); $pdf->SetSubject($arrPDF["\146\157\x72\155\x74\x69\164\x6c\145"]); $pdf->setPrintHeader(false); $pdf->setPrintFooter(false); $pdf->SetMargins(0, 0, 0); $pdf->SetAutoPageBreak(true, 0); $pdf->setImageScale(PDF_IMAGE_SCALE_RATIO); $pdf->setLanguageArray($l); $pdf->getAliasNbPages(); $customfont = array("\122" => false, "\102" => false, "\x49" => false, "\111\102" => false); foreach ($customfont as $attr => $status) { if (!empty($arrPDF[$attr]) && file_exists($rootDir . "\x2f" . $arrPDF[$attr])) { $customfont[$attr] = \TCPDF_FONTS::addTTFfont($rootDir . "\57" . $arrPDF[$attr], '', '', 32, $rootDir . "\57" . dirname($arrPDF[$attr]) . "\x2f"); $file_parts = pathinfo($rootDir . "\x2f" . $arrPDF[$attr]); $pdf->AddFont("\143\165\x73\x74\157\155\146\x6f\x6e\164", $attr == "\x52" ? '' : $attr, $file_parts["\x64\x69\x72\x6e\x61\x6d\145"] . "\57" . strtolower($customfont[$attr] . "\x2e\160\150\160")); } } $seiten = -1; $where = ''; if ($mode === "\x53") { if (!empty($arrPDF["\x6d\165\x6c\x74\x69\146\x6f\x72\155"]) && is_array($arrPDF["\155\x75\x6c\164\151\146\157\162\155"]) && $arrPDF["\155\165\154\x74\151\146\x6f\162\x6d"][0]["\x62\145\144\x69\x6e\147\x75\x6e\147"] !== '') { $seiten = array(); foreach ($arrPDF["\155\165\154\164\151\146\157\x72\x6d"] as $multi) { $multi["\151\156\x76\x65\x72\x74"] = "\165\x73\145\x64"; if (!self::checkBedingung($multi, $arrPDF)) { continue; } $arrBereiche = StringUtil::trimsplit("\x2c", $multi["\x73\145\x69\164\x65\x6e"]); foreach ($arrBereiche as $ber) { if (strpos($ber, "\x2d") === false) { $seiten[] = $ber; } else { $se = StringUtil::trimsplit("\55", $ber); for ($i = $se[0]; $i <= $se[1]; $i++) { $seiten[] = $i; } } } } if (count($seiten) < 1) { @unlink($rootDir . "\57" . $datei); return false; } $seiten = array_unique($seiten, SORT_NUMERIC); $where = "\x20\x41\116\104\40\160\141\x67\x65\40\x49\116\x28" . implode("\54", $seiten) . "\x29"; } } $objItems = Database::getInstance()->prepare("\x53\x45\x4c\105\x43\124\40\x2a\40\x46\x52\x4f\x4d\x20\164\154\137\x70\x64\146\146\137\160\x6f\x73\x69\x74\x69\x6f\156\163\40\x57\110\105\122\x45\x20\160\x75\x62\154\151\x73\150\x65\144\x3d\61\x20\101\116\104\40\x70\151\144\x3d\77" . $where . "\40\117\x52\104\105\122\40\102\131\40\160\141\147\x65\x2c\x20\x73\157\162\x74\151\x6e\x67")->execute($arrPDF["\x66\157\x72\155\151\144"]); if ($objItems->numRows < 1 && $mode === "\x53") { @unlink($rootDir . "\57" . $datei); return false; } if ($objItems->numRows > 0) { $page = 0; $lastpos = array(0, 0); while ($objItems->next()) { $arrItem = array(); $arrItem["\x69\144"] = $objItems->id; $arrItem["\164\171\160\145"] = $objItems->type; $arrItem["\160\x69\x63\x74\171\160\x65"] = $objItems->pictype; if ($objItems->pictype === "\165\165\x69\144") { $picuuid = html_entity_decode($objItems->pictag); if (!Validator::isUuid($picuuid)) { $picuuid = System::getContainer()->get("\x63\x6f\156\164\x61\157\x2e\151\x6e\163\x65\162\x74\137\164\141\x67\56\x70\x61\x72\x73\x65\162")->replaceInline($picuuid); } if (array_key_exists($picuuid, $arrPDF["\x61\162\x72\106\151\145\x6c\144\x73"])) { $picuuid = $arrPDF["\141\x72\162\x46\x69\145\154\144\x73"][$picuuid]["\166\x61\154\x75\145"]; } $picuuid = str_replace("\55", '', $picuuid); if (mb_substr($picuuid, 0, 2) === "\60\x78") { $picuuid = mb_substr($picuuid, 2); } if (ctype_xdigit($picuuid) && mb_strlen($picuuid) == 32) { $picuuid = hex2bin($picuuid); } $objPic = FilesModel::findByUuid($picuuid); if ($objPic == null) { continue; } $arrItem["\160\151\x63\164\171\x70\x65"] = "\146\x69\x6c\145"; $arrItem["\160\x69\x63\164\x61\x67"] = $objPic->path ?? ''; } else { $objPic = FilesModel::findByUuid($objItems->picture); $arrItem["\160\x69\143\164\x61\147"] = $objItems->pictag; } $arrItem["\x70\151\143\x74\165\162\145"] = $objPic->path ?? ''; $arrItem["\142\x61\x72\164\171\160\x65"] = $objItems->bartype; $arrItem["\x74\x65\170\x74\151\164\x65\x6d\x73"] = StringUtil::deserialize($objItems->textitems, true); $arrItem["\x70\x61\x67\x65"] = $objItems->page; $arrItem["\160\x6f\x73\170\171"] = StringUtil::deserialize($objItems->posxy, true); $arrItem["\x70\151\x63\163\151\172\145"] = StringUtil::deserialize($objItems->picsize, true); $arrItem["\x61\154\151\147\156"] = $objItems->align; $arrItem["\x66\x6f\156\x74\163\x74\171\154\x65"] = StringUtil::deserialize($objItems->fontstyle, true); $arrItem["\x74\145\170\x74\164\162\141\x6e\x73\146\157\x72\x6d"] = $objItems->texttransform; $arrItem["\x66\157\156\x74\163\x69\172\145"] = $objItems->fontsize; $arrItem["\164\145\170\164\x63\x6f\154\x6f\x72"] = $objItems->textcolor; $arrItem["\x62\157\x72\x64\145\x72\162\x69\147\x68\164"] = $objItems->borderright; $arrItem["\x71\x72\x73\x69\172\145"] = $objItems->qrsize; $arrItem["\x62\145\144\151\x6e\x67\x75\x6e\x67"] = $objItems->bedingung; $arrItem["\x6e\x6f\142\154\141\156\x6b\163"] = $objItems->noblanks; $arrItem["\151\x6e\166\x65\x72\164"] = $objItems->invert; foreach ($arrItem["\164\145\x78\x74\151\164\x65\x6d\163"] as $key => $value) { $feld = explode("\x7c", StringUtil::decodeEntities($value["\x66\145\x6c\144"])); $arrItem["\x74\x65\170\164\x69\x74\x65\155\163"][$key]["\x66\145\154\x64"] = $feld[0]; $arrItem["\x74\x65\x78\x74\x69\x74\145\x6d\x73"][$key]["\x6f\160\x74\x69\157\x6e\x73"] = $feld[1] ?? ''; $arrItem["\164\145\170\x74\x69\164\145\x6d\x73"][$key]["\142\x65\144\x69\156\x67\165\x6e\x67"] = StringUtil::decodeEntities($value["\x62\x65\144\x69\x6e\x67\x75\156\x67"]); } if (isset($GLOBALS["\x54\114\x5f\110\x4f\x4f\113\x53"]["\x70\x64\146\x5f\146\157\x72\x6d\x73\120\157\x73\x69\164\151\157\156\x73"]) && \is_array($GLOBALS["\124\114\x5f\110\117\x4f\x4b\123"]["\160\x64\146\x5f\146\x6f\x72\155\163\120\x6f\x73\x69\164\x69\x6f\x6e\x73"])) { foreach ($GLOBALS["\x54\114\137\x48\117\x4f\113\123"]["\x70\x64\x66\x5f\146\157\x72\x6d\x73\120\x6f\x73\151\x74\151\157\x6e\163"] as $callback) { $arrItem = System::importStatic($callback[0])->{$callback[1]}($arrItem); } } $arrItem["\160\141\147\x65"] = $objItems->page; while ($page != $arrItem["\x70\141\147\145"]) { if ($page > 0) { self::C1B98360E6714BCA818AC62C8F21E9F2($pdf); } if ($arrPDF["\141\154\x6c\x70\141\x67\145\x73"] == 1) { $page++; if (is_array($seiten) && !in_array($page, $seiten)) { continue; } } else { $page = $arrItem["\160\141\x67\x65"]; } $pdf->AddPage(); if ($pages > 0) { if ($page <= $pages) { $pdf->useTemplate($pdf->importPage($page), 0, 0, null, null, true); } else { $pdf->useTemplate($pdf->importPage($pages), 0, 0, null, null, true); } $arrPageDimensions = $pdf->getPageDimensions(); $pageheight = $arrPageDimensions["\x68\x6b"]; $pagewidth = $arrPageDimensions["\167\153"]; } } $text = ''; if ($arrItem["\x74\x79\x70\x65"] === "\160\x69\x63") { $pos = array(); $pictag = self::normalisierung($arrItem["\160\x69\x63\164\141\x67"]); if (self::is_relative($arrItem["\x70\157\x73\x78\x79"][0])) { $pos[0] = $lastpos[0] + $arrItem["\x70\x6f\163\170\171"][0]; } else { $pos[0] = $arrItem["\x70\157\x73\170\171"][0] + $arrPDF["\157\146\146\163\145\x74"][0]; } if (self::is_relative($arrItem["\160\157\x73\170\171"][1])) { $pos[1] = $lastpos[1] + $arrItem["\160\x6f\163\170\171"][1]; } else { $pos[1] = $arrItem["\x70\x6f\163\170\171"][1] + $arrPDF["\x6f\146\x66\x73\145\x74"][1]; } if ($datei !== '') { if ($mode === "\123") { if (!empty($arrItem["\142\145\144\x69\x6e\147\x75\156\147"])) { if (!self::checkBedingung($arrItem, $arrPDF)) { continue; } } } switch ($arrItem["\160\151\x63\164\x79\160\145"]) { case "\x66\x69\154\x65": $imageFactory = System::getContainer()->get("\143\x6f\156\164\x61\157\56\x69\155\x61\147\x65\56\146\x61\143\x74\157\162\x79"); $image = $imageFactory->create($rootDir . "\57" . $arrItem["\160\x69\x63\x74\165\x72\145"], array($arrItem["\160\151\x63\x73\151\x7a\x65"][0] * 11.8, $arrItem["\160\x69\143\x73\151\x7a\145"][1] * 11.8, ResizeConfiguration::MODE_CROP)); $src = str_replace("\45\62\x30", "\x20", $image->getUrl($rootDir)); $bildtyp = self::getimagetype($src); if ($bildtyp != '') { $pdf->Image($rootDir . "\57" . $src, $pos[0], $pos[1], $arrItem["\x70\151\143\x73\151\x7a\x65"][0], $arrItem["\x70\x69\143\x73\x69\x7a\x65"][1], $bildtyp); $hascontent = true; } break; case "\165\160\x6c\x6f\141\144": if (empty($arrPDF["\x61\162\x72\106\151\145\x6c\144\x73"][$arrItem["\x70\151\x63\164\141\147"]]["\x76\141\x6c\165\145"])) { break; } $temppath = $arrPDF["\x61\x72\162\106\151\x65\154\144\163"][$arrItem["\160\151\x63\x74\141\147"]]["\166\141\154\x75\x65"]; $picpath = $arrPDF["\141\162\x72\x46\151\145\x6c\144\163"][$arrItem["\x70\x69\x63\x74\141\x67"]]["\x74\145\155\x70"]; copy($temppath, $rootDir . "\x2f" . $picpath); $imageFactory = System::getContainer()->get("\143\x6f\156\x74\x61\157\56\x69\155\141\x67\145\x2e\146\141\143\164\157\x72\171"); $image = $imageFactory->create($rootDir . "\x2f" . $picpath, array($arrItem["\160\x69\143\163\x69\172\145"][0] * 11.8, $arrItem["\x70\x69\x63\163\x69\x7a\145"][1] * 11.8, ResizeConfiguration::MODE_CROP)); $src = str_replace("\x25\x32\60", "\x20", $image->getUrl($rootDir)); $bildtyp = self::getimagetype($src); if ($bildtyp != '') { $pdf->Image($rootDir . "\x2f" . $src, $pos[0], $pos[1], $arrItem["\x70\x69\x63\x73\151\172\145"][0], $arrItem["\x70\151\143\x73\x69\x7a\145"][1], $bildtyp); $hascontent = true; } break; case "\x64\141\x74\x61": $png = base64_decode(preg_replace("\43\136\x64\x61\164\141\72\x69\155\x61\x67\145\x2f\133\136\73\135\53\x3b\x62\141\163\145\66\x34\x2c\x23", '', $arrPDF["\141\162\162\x46\x69\145\154\x64\163"][$pictag]["\x76\141\x6c\x75\x65"])); $pdf->Image("\x40" . $png, $pos[0], $pos[1], $arrItem["\x70\x69\x63\x73\x69\172\x65"][0], $arrItem["\x70\x69\x63\163\x69\172\145"][1], "\x50\x4e\107"); $hascontent = true; break; } } else { $png = base64_decode(preg_replace("\43\136\144\x61\164\x61\72\151\x6d\141\x67\145\x2f\x5b\136\73\135\53\x3b\142\x61\x73\145\66\x34\x2c\x23", '', IMGDUMMY)); $pdf->Image("\x40" . $png, $pos[0], $pos[1], $arrItem["\x70\151\x63\x73\151\x7a\145"][0], $arrItem["\160\151\x63\163\151\x7a\x65"][1], "\120\116\107"); $pdf->SetXY($lastpos[0] = $pos[0], $lastpos[1] = $pos[1]); $pdf->SetTextColor(0, 0, 0); $pdf->writeHTML($arrItem["\160\151\143\x74\171\x70\145"] == "\x66\151\154\x65" ? basename($arrItem["\x70\151\143\164\165\162\x65"]) : $arrItem["\160\151\143\164\141\147"], false, false, true, false, "\x4c"); $hascontent = true; } } else { if ($arrItem["\x74\x79\x70\x65"] === "\x71\162\143\x6f\144\145") { if ($datei !== '') { if ($mode === "\x53") { if (!empty($arrItem["\142\x65\x64\x69\x6e\147\x75\x6e\x67"])) { if (!self::checkBedingung($arrItem, $arrPDF)) { continue; } } } } } $fontattr = ''; foreach ($arrItem["\146\157\156\164\x73\x74\171\x6c\x65"] as $attr) { switch ($attr) { case "\151\x74\141\x6c\151\x63": $fontattr .= "\111"; break; case "\142\x6f\x6c\x64": $fontattr .= "\102"; break; } } switch ($arrItem["\141\154\x69\147\x6e"]) { case "\162\x69\147\x68\x74": $align = "\x52"; break; case "\143\145\x6e\x74\145\x72": $align = "\x43"; break; default: $align = "\114"; } $color = $arrPDF["\x74\x65\170\164\x63\x6f\154\x6f\162"] != '' ? $arrPDF["\164\145\170\164\143\157\154\x6f\x72"] : "\60\60\60\x30\60\x30"; if (strlen($color) != 6) { if (strlen($color) == 3) { $color = substr($color, 0, 1) . substr($color, 0, 1) . substr($color, 1, 1) . substr($color, 1, 1) . substr($color, 2, 1) . substr($color, 2, 1); } else { $color = "\60\x30\x30\60\60\60"; } } $r = hexdec(substr($color, 0, 2)); $g = hexdec(substr($color, 2, 2)); $b = hexdec(substr($color, 4, 2)); $pdf->SetTextColor($r, $g, $b); if ($fontattr === "\x42\x49") { $fontattr = "\x49\x42"; } $fontidx = $fontattr == '' ? "\122" : $fontattr; $pdf->SetFont(empty($customfont[$fontidx]) ? "\150\x65\154\166\x65\x74\x69\x63\x61" : "\x63\165\163\164\x6f\x6d\x66\157\156\x74", $fontattr, $arrItem["\x66\157\x6e\164\x73\x69\x7a\145"]); $text = ''; $blank = $arrItem["\x6e\157\x62\154\141\156\x6b\163"] ? '' : "\x20"; foreach ($arrItem["\x74\x65\170\x74\151\x74\x65\x6d\x73"] as $item) { if ($mode === "\x53") { if (!empty($item["\x62\x65\144\x69\156\147\165\156\x67"])) { if (!self::checkBedingung($item, $arrPDF)) { continue; } } } if (substr($item["\x66\145\154\144"], 0, 1) === "\42") { if (substr($item["\x66\x65\x6c\x64"], 1, 1) === "\x2c" || substr($item["\x66\x65\154\144"], 1, 1) === "\x3c") { $text = trim($text); } $text .= System::getContainer()->get("\x63\x6f\x6e\x74\141\157\56\151\156\163\x65\162\x74\137\164\x61\147\x2e\x70\x61\x72\x73\x65\x72")->replaceInline(trim($item["\146\x65\154\x64"], "\x22")) . $blank; } else { $arrFeld = $arrPDF["\x61\x72\162\x46\x69\145\154\144\163"][self::normalisierung($item["\x66\145\154\144"])] ?? array(); if (empty($arrFeld)) { continue; } if (strtolower($item["\x6f\x70\164\151\x6f\x6e\163"]) === "\x62\141\x73\x65\x6e\x61\x6d\x65") { $txtteil = $arrFeld[$mode === "\123" && !empty($arrFeld["\166\x61\x6c\x75\x65"]) ? "\x62\x61\x73\145\x6e\x61\x6d\145" : "\x6f\x72\151\147"] ?? ''; } else { $txtteil = trim($arrFeld[$mode === "\x53" ? "\166\x61\x6c\x75\145" : "\x6f\x72\151\x67"] ?? ''); } $text .= System::getContainer()->get("\143\157\x6e\x74\141\x6f\56\x69\x6e\163\145\x72\x74\137\164\141\147\56\x70\141\x72\163\x65\162")->replaceInline($txtteil) . $blank; } } } if ($text === '') { continue; } while ($page != $arrItem["\160\141\147\145"]) { if ($page > 0) { self::C1B98360E6714BCA818AC62C8F21E9F2($pdf); } if ($arrPDF["\141\x6c\x6c\160\x61\x67\x65\x73"] == 1) { $page++; if (is_array($seiten) && !in_array($page, $seiten)) { continue; } } else { $page = $arrItem["\x70\141\x67\x65"]; } $pdf->AddPage(); if ($pages > 0) { if ($page <= $pages) { $pdf->useTemplate($pdf->importPage($page), 0, 0, null, null, true); } else { $pdf->useTemplate($pdf->importPage($pages), 0, 0, null, null, true); } $arrPageDimensions = $pdf->getPageDimensions(); $pageheight = $arrPageDimensions["\x68\153"]; $pagewidth = $arrPageDimensions["\167\153"]; } } while ($page != $arrItem["\160\x61\x67\145"]) { if ($page > 0) { self::C1B98360E6714BCA818AC62C8F21E9F2($pdf); } if ($arrPDF["\141\154\154\x70\141\x67\145\x73"] == 1) { $page++; if (is_array($seiten) && !in_array($page, $seiten)) { continue; } } else { $page = $arrItem["\x70\141\147\x65"]; } if (!self::E9EBD6F7C44D361732DA31836C7D15BD() && $page > 2) { break; } $pdf->AddPage(); if ($pages > 0) { if ($page <= $pages) { $pdf->useTemplate($pdf->importPage($page), 0, 0, null, null, true); } else { $pdf->useTemplate($pdf->importPage($pages), 0, 0, null, null, true); } $arrPageDimensions = $pdf->getPageDimensions(); $pagewidth = $arrPageDimensions["\x77\x6b"]; } } if (!self::E9EBD6F7C44D361732DA31836C7D15BD() && $page > 2) { break; } if (Self::is_relative($arrItem["\x70\x6f\x73\170\x79"][0])) { $borderleft = $lastpos[0] + $arrItem["\x70\x6f\x73\x78\171"][0]; } else { $borderleft = $arrItem["\160\157\163\170\x79"][0] + $arrPDF["\157\x66\x66\163\x65\164"][0]; } $borderright = 0 - $arrPDF["\x6f\x66\146\x73\145\x74"][0]; if ($arrItem["\142\x6f\x72\144\145\162\x72\x69\x67\150\164"] != '' && is_numeric($arrItem["\x62\157\162\144\x65\x72\162\151\147\150\x74"]) && $pagewidth - $arrItem["\x62\157\x72\x64\145\x72\x72\x69\147\150\164"] > $borderleft - $arrPDF["\157\x66\x66\163\x65\x74"][0]) { $borderright = $arrItem["\142\157\x72\144\x65\162\x72\151\147\150\164"] - $arrPDF["\x6f\146\146\163\145\164"][0]; } $pdf->SetMargins($borderleft, 0, $borderright); if (Self::is_relative($arrItem["\x70\x6f\x73\x78\171"][0])) { $pos[0] = $lastpos[0] + $arrItem["\x70\x6f\163\170\171"][0]; } else { $pos[0] = $arrItem["\x70\157\x73\x78\171"][0] + $arrPDF["\x6f\x66\146\163\x65\164"][0]; } if (Self::is_relative($arrItem["\160\x6f\163\170\x79"][1])) { $pos[1] = $lastpos[1] + $arrItem["\x70\x6f\163\x78\171"][1]; } else { $pos[1] = $arrItem["\160\157\163\170\171"][1] + $arrPDF["\x6f\146\x66\163\145\164"][1]; } $pdf->SetXY($lastpos[0] = $pos[0], $lastpos[1] = $pos[1]); $text = System::getContainer()->get("\143\157\x6e\164\141\x6f\x2e\x69\156\163\145\162\164\137\164\x61\147\x2e\x70\x61\x72\x73\x65\162")->replaceInline($text); switch ($arrItem["\164\171\160\145"]) { case "\x71\162\x63\157\144\x65": if (strlen(trim($text)) > 0) { switch ($arrItem["\142\x61\x72\164\171\160\145"]) { case "\104\x41\124\x41\115\101\124\122\111\x58": case "\121\122\x43\x4f\104\x45\x2c\114": case "\x51\122\103\117\104\x45\54\x4d": case "\x51\122\x43\117\x44\x45\x2c\x51": case "\x51\122\103\117\x44\105\x2c\110": $style = array("\x62\157\162\x64\145\x72" => false, "\166\x70\x61\x64\x64\151\156\147" => "\x61\165\164\x6f", "\x68\x70\x61\x64\144\151\x6e\x67" => "\x61\x75\164\157", "\146\x67\x63\x6f\x6c\157\x72" => array($r, $g, $b), "\142\147\x63\157\x6c\157\162" => array(255, 255, 255), "\x6d\157\x64\x75\x6c\x65\137\x77\x69\x64\164\150" => $arrItem["\161\x72\x73\x69\x7a\145"], "\155\157\144\165\x6c\x65\137\x68\x65\x69\147\x68\164" => $arrItem["\161\x72\x73\151\x7a\x65"]); $pdf->write2DBarcode(trim($text), $arrItem["\x62\141\162\x74\x79\x70\145"], $pos[0], $pos[1], 0, 0, $style, "\x4e"); break; case "\120\x44\x46\x34\61\x37": $style = array("\x62\x6f\162\x64\x65\162" => false, "\x76\160\141\144\x64\x69\156\147" => "\x61\x75\164\x6f", "\x68\160\x61\x64\x64\151\x6e\147" => "\x61\165\x74\x6f", "\146\147\x63\x6f\154\x6f\x72" => array($r, $g, $b), "\x62\x67\143\x6f\x6c\x6f\162" => array(255, 255, 255)); $pdf->write2DBarcode(trim($text), $arrItem["\x62\x61\162\164\x79\160\145"], $pos[0], $pos[1], 0, $arrItem["\161\162\x73\151\172\x65"] * 10, $style, "\116"); break; default: $style = array("\163\164\162\145\x74\x63\150" => false, "\x66\x69\164\167\151\144\x74\150" => true, "\142\157\162\x64\145\x72" => false, "\150\x70\x61\144\x64\x69\x6e\147" => "\x61\x75\164\x6f", "\x76\160\141\144\x64\151\156\x67" => "\x61\165\x74\x6f", "\146\x67\143\157\154\x6f\162" => array($r, $g, $b), "\x62\147\143\x6f\154\x6f\x72" => array(255, 255, 255), "\164\x65\x78\x74" => false); $pdf->write1DBarcode(trim($text), $arrItem["\142\x61\162\x74\x79\x70\x65"], $pos[0], $pos[1], '', $arrItem["\x71\x72\x73\x69\x7a\x65"] * 5, 0.3, $style, "\116"); break; } $hascontent = true; } break; case "\x70\x69\x63": break; default: switch ($arrItem["\164\145\170\164\164\x72\x61\156\x73\146\157\162\155"]) { case "\x75\160\160\x65\x72\143\141\x73\x65": $text = mb_convert_case($text, MB_CASE_UPPER, "\x55\124\106\55\x38"); break; case "\x6c\x6f\167\x65\x72\x63\x61\x73\145": $text = mb_convert_case($text, MB_CASE_LOWER, "\x55\124\x46\55\x38"); break; case "\x63\141\160\x69\x74\x61\154\151\172\x65": $text = mb_convert_case($text, MB_CASE_TITLE, "\125\124\x46\x2d\70"); break; } $pdf->writeHTML(nl2br(trim($text)), false, false, true, false, $align); $hascontent = true; break; } } } if (self::E9EBD6F7C44D361732DA31836C7D15BD() === true || $page < 2) { while ($page < $pages && $arrPDF["\x61\x6c\x6c\x70\x61\x67\145\163"] == 1) { if ($page > 0) { self::C1B98360E6714BCA818AC62C8F21E9F2($pdf); } $page++; if (is_array($seiten) && !in_array($page, $seiten)) { continue; } $pdf->AddPage(); $pdf->useTemplate($pdf->importPage($page), 0, 0, null, null, true); } } if ($page > 0) { self::C1B98360E6714BCA818AC62C8F21E9F2($pdf); } $pdf->lastPage(); if ($arrPDF["\x70\162\157\164\145\143\164"] == 1) { if (in_array("\160\x72\x69\x6e\164\x2d\150\x69\x67\x68", $arrPDF["\x70\162\x6f\164\x65\143\164\x66\x6c\x61\147\x73"]) && !in_array("\160\x72\151\x6e\164", $arrPDF["\x70\162\157\x74\145\x63\164\146\154\x61\x67\163"])) { $arrPDF["\x70\162\157\x74\145\x63\x74\x66\x6c\141\x67\x73"][] = "\x70\162\x69\156\164"; } $opass = $arrPDF["\x6f\160\145\x6e\x70\141\163\163\167\x6f\x72\x64"]; if (empty($opass)) { $pass = $arrPDF["\160\141\x73\x73\x77\157\x72\144"]; if ($pass == '') { $pass = null; } $pdf->SetProtection(array_diff(self::$arrProtectflags, $arrPDF["\160\162\157\164\145\x63\x74\146\x6c\141\147\163"]), '', $pass, 1, NULL); } else { $pdf->SetProtection(self::$arrProtectflags, $opass, $opass, 1, NULL); } } $result = true; if ($mode === "\104") { $pdf->Output($arrPDF["\x66\157\162\x6d\x74\151\x74\x6c\145"] . "\x2e\x70\x64\x66", "\104"); } else { if ($hascontent) { $pdf->Output($rootDir . "\57" . $datei, "\x46"); $_SESSION["\160\144\x66\x5f\x66\157\162\155\163"]["\160\144\x66\x64\157\x63\x75\x6d\145\156\x74"] = $datei; } else { @unlink($rootDir . "\x2f" . $datei); $result = false; } } unset($pdf); return $result; } protected static function checkBedingung($item, $arrPDF) { $bedingung = Self::normalisierung($item["\142\145\x64\151\156\x67\x75\156\x67"]); if (!isset($item["\151\x6e\166\145\x72\x74"])) { $item["\x69\156\x76\145\162\x74"] = "\165\x73\145\x64"; } if (isset($arrPDF["\x61\x72\162\x46\x69\145\154\144\163"][$bedingung])) { if ($item["\151\156\166\x65\162\164"] !== "\x65\x6d\x70\x74\171" && $item["\151\156\166\145\162\164"] != "\61") { if ($arrPDF["\x61\162\162\106\151\145\x6c\x64\163"][$bedingung]["\166\x61\154\165\145"] === '' || $arrPDF["\x61\x72\x72\106\151\x65\x6c\x64\x73"][$bedingung]["\166\x61\154\165\x65"] === null) { return false; } } else { if ($arrPDF["\141\x72\162\x46\151\x65\154\144\x73"][$bedingung]["\x76\141\x6c\x75\145"] !== '' && $arrPDF["\141\162\162\x46\151\145\x6c\144\x73"][$bedingung]["\166\141\154\165\145"] !== null) { return false; } } } else { $found = 0; foreach ($arrPDF["\141\x72\162\x46\x69\x65\154\144\x73"] as $name => $val) { if (!isset($val["\x74\171\x70\x65"])) { continue; } if ($val["\164\x79\x70\145"] !== "\163\145\x6c\145\x63\164" && $val["\x74\171\x70\x65"] !== "\162\141\144\151\157" && $val["\164\x79\160\x65"] !== "\143\150\145\143\x6b\142\x6f\170" && $val["\x74\x79\160\145"] !== "\143\x6d\137\141\x6c\x74\145\x72\156\141\x74\x69\166\145") { continue; } if (!is_array($val["\166\141\154\165\x65"])) { if ($item["\x69\x6e\166\x65\162\164"] !== "\145\x6d\x70\164\x79") { if ($bedingung !== self::normalisierung($val["\x76\141\x6c\x75\145"], $name)) { continue; } } else { if ($bedingung === self::normalisierung($val["\x76\x61\x6c\165\145"], $name)) { continue; } } } else { if ($item["\x69\156\166\x65\x72\164"] !== "\145\x6d\160\164\x79") { if (!in_array($bedingung, self::normalisierung($val["\x76\x61\154\165\x65"], $name))) { continue; } } else { if (in_array($bedingung, self::normalisierung($val["\166\x61\x6c\165\145"], $name))) { continue; } } } $found = 1; } if (!$found) { return false; } } return true; } protected static function C1B98360E6714BCA818AC62C8F21E9F2($pdf) { if (!self::E9EBD6F7C44D361732DA31836C7D15BD()) { $x = $pdf->GetX(); $y = $pdf->GetY(); $arrPageDimensions = $pdf->getPageDimensions(); $pdf->SetXY(15, $arrPageDimensions["\x68\x6b"] - 14); $pdf->writeHTML("\x3c\163\x70\x61\156\40\x73\x74\x79\x6c\x65\75\42\x63\x6f\154\x6f\x72\x3a\x23\x66\x66\x30\x30\60\x30\x3b\142\x61\x63\153\147\162\157\x75\156\x64\55\x63\x6f\x6c\x6f\x72\72\43\146\146\x65\145\145\x65\73\146\x6f\156\164\x2d\x73\x69\172\145\72\71\x70\170\x3b\146\157\x6e\x74\55\167\145\151\x67\x68\164\72\142\157\x6c\144\42\x3e\x26\x6e\x62\163\x70\73\x26\x6e\142\163\x70\x3b\x3d\x3d\40\x44\105\115\x4f\40\166\145\162\163\x69\x6f\x6e\40\x6f\146\x20\144\x6f\x2d\167\150\151\154\145\x2f\x63\157\156\164\141\157\55\x70\144\146\146\157\x72\x6d\163\55\142\x75\x6e\x64\x6c\x65\40\x2d\x20\155\x61\170\151\155\x75\155\40\62\x20\x70\x61\147\x65\163\x20\55\x20\x42\165\171\x20\114\151\143\145\156\143\145\40\153\x65\171\41\40\75\75\46\156\142\163\160\73\x26\x6e\142\x73\x70\x3b\74\x2f\163\x70\x61\156\76", false, true, true, false, "\114"); $pdf->SetXY($x, $y); } } protected static function E9EBD6F7C44D361732DA31836C7D15BD() { $licence = @$_ENV[constant("\120\x52\117\104\125\103\x54") . constant("\x4c\111\x5a\105\x4e\x5a\x50")]; if ($licence == '') { $licence = Config::get(constant("\x50\122\x4f\104\x55\103\124") . constant("\x4c\111\132\x45\116\132\120")); } $k = str_split($licence, strlen(constant("\126\60\x56\64\130\112\105\167\x74\166\x32\x46\x43\x76\x58\x6c\122\x4e"))); $p = eval("\x72\x65\x74\x75\162\156\x20\163\x75\142\x73\x74\x72\50\42\60\60\60\60\42\56\163\x74\162\164\157\165\x70\x70\145\x72\x28\144\145\x63\150\x65\170\50\x63\162\x63\63\62\x28\155\144\x35\50\x22" . constant("\120\122\x4f\x44\x55\103\x54") . "\x3a\x22\56\163\x75\x62\x73\164\162\x28\x56\105\122\x53\111\x4f\x4e\x2c\60\54\61\x29\56\x22\72" . ($k[0] ?? '') . "\x22\x29\51\x29\x29\54\x2d\64\51\x3b"); return !empty($p) && isset($k[1]) && $p === $k[1]; } public static function encrypt($varValue, $dc = null) { if (empty($varValue)) { return ''; } mt_srand(6152); $out = array(); for ($x = 0, $l = strlen($varValue); $x < $l; $x++) { $out[$x] = ord($varValue[$x]) * 3 + mt_rand(350, 16000); } mt_srand(); return implode("\x2e", $out); } public static function decrypt($varValue, $dc = null) { if (empty($varValue)) { return ''; } mt_srand(6152); $out = array(); $blocks = explode("\56", $varValue); foreach ($blocks as $block) { $ord = (intval($block) - mt_rand(350, 16000)) / 3; $out[] = chr($ord); } mt_srand(); return implode('', $out); } public static function normalisierung($name, $field = '') { if (!empty($field)) { $field .= "\x7e"; } if (is_array($name)) { for ($i = 0; $i < count($name); $i++) { $name[$i] = $field . str_replace(array("\40", "\x28", "\x29"), array("\137", '', ''), strtolower($name[$i])); } } else { $name = $field . str_replace(array("\40", "\x28", "\x29"), array("\x5f", '', ''), strtolower($name)); } return $name; } public static function getFormFields($formid) { $arrFields = array(); $cm_text = ''; $cm_nr = 0; $objFormField = Database::getInstance()->prepare("\x53\x45\114\x45\103\x54\40\52\40\106\122\x4f\115\40\164\x6c\x5f\x66\157\162\155\x5f\146\x69\x65\154\144\40\x57\110\x45\x52\105\x20\x69\x6e\166\x69\163\151\142\x6c\x65\x3c\x3e\61\x20\101\116\104\40\160\151\x64\75\x3f\40\117\x52\x44\105\x52\40\x42\131\40\163\157\x72\x74\151\156\x67")->execute($formid); if ($objFormField->numRows < 1) { return $arrFields; } while ($objFormField->next()) { $arrRow = array(); $arrRow = $objFormField->row(); $options = StringUtil::deserialize($arrRow["\x6f\160\164\x69\x6f\x6e\x73"]); switch ($arrRow["\164\x79\160\x65"]) { case "\x73\165\x62\155\x69\164": break; case "\163\145\154\145\x63\164": case "\x72\x61\144\151\x6f": case "\143\x68\145\x63\153\x62\x6f\x78": if (empty($options)) { break; } foreach ($options as $opt) { $arrFields[$arrRow["\156\141\155\x65"] . "\176" . $opt["\x76\x61\x6c\165\145"]] = $arrRow["\156\141\155\145"] . "\176" . $opt["\x76\141\154\165\145"]; } break; case "\143\x6f\156\144\x69\164\x69\157\156": case "\164\145\170\x74": case "\164\x65\x78\164\x61\162\x65\x61": case "\x68\151\144\x64\x65\156": $arrFields[$arrRow["\x6e\141\155\145"]] = $arrRow["\x6e\141\155\145"]; break; case "\x63\x6d\x5f\x61\x6c\x74\x65\x72\x6e\141\x74\x69\166\145": if ($arrRow["\143\x6d\137\141\154\164\145\162\x6e\141\x74\151\166\x65\x54\x79\160\145"] === "\143\155\x5f\x73\164\x6f\160") { break; } if ($arrRow["\143\x6d\137\141\x6c\164\145\x72\x6e\x61\164\151\x76\145\124\171\160\145"] === "\x63\x6d\137\163\164\141\x72\164") { $cm_text = $arrRow["\x6e\141\x6d\x65"]; $cm_nr = 0; } else { $cm_nr++; } $arrFields[$cm_text . "\x7e" . $cm_nr] = $cm_text . "\x7e" . $cm_nr; break; } } asort($arrFields, SORT_FLAG_CASE); return $arrFields; } protected static function getimagetype($src) { $file = System::getContainer()->getParameter("\x6b\x65\162\x6e\145\154\x2e\x70\x72\x6f\x6a\x65\143\164\137\144\x69\162") . "\57" . $src; (new File($src))->createIfDeferred(); if (!file_exists($file)) { return ''; } $size = getimagesize($file); if ($size[2] == IMAGETYPE_GIF) { return "\107\x49\x46"; } else { if ($size[2] == IMAGETYPE_JPEG) { return "\112\120\105\107"; } else { if ($size[2] == IMAGETYPE_PNG) { return "\120\x4e\x47"; } else { return ''; } } } } protected static function is_relative($pos) { if (substr($pos, 0, 1) === "\53") { return true; } if (substr($pos, 0, 1) === "\55") { return true; } return false; } }